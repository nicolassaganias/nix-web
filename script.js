// Traducciones
const translations = {
    es: {
        // Navegación
        home: "home",
        projects: "proyectos",
        contact: "contacto",
        about: "about",
        services: "servicios",
        language: "idioma",
        
        // Home
        title: "Desarrollador Tecnológico & Artista",
        subtitle: "Creo experiencias interactivas que conectan lo digital con lo físico",
        description: "Mi trabajo explora la intersección entre tecnología, arte y educación, desarrollando soluciones innovadoras que transforman la forma en que interactuamos con nuestro entorno.",
        
        // Secciones home
        whatIDo: "¿qué hago?",
        whatIDoText: "Desarrollo hardware y software personalizado, creo tecnologías conviviales y sistemas interactivos. Me especializo en formaciones, digitalización de procesos, adquisición y análisis de datos, interfaces humano-máquina, automatización, prototipado rápido, integración de sensores y actuadores, y soluciones creativas para artistas y educadores.",
        whoIAm: "¿quién soy?",
        whoIAmText: "Utilizo sensores, microcontroladores y algoritmos para desarrollar sistemas que dialogan con su entorno y con las personas que los habitan. Mi enfoque siempre busca hacer visible lo invisible, ya sea a través de datos ambientales, procesos biológicos o comportamientos emergentes en sistemas complejos.",
        recentProjects: "proyectos recientes",
        seeAllProjects: "Ver Todos los Proyectos",
        knowMyServices: "Conocer Mis Servicios",
        
        // Páginas
        projectsTitle: "Proyectos",
        projectsIntro: "Desarrollos de software y hardware personalizado. Sensores, adquisición de datos, digitalización. Traducciones analógico-digital / digital-analógico. Interfaces humano - máquina. Tecnologías conviviales, open-source, open-hard.",
        servicesTitle: "Servicios",
        servicesIntro: "Ofrezco servicios especializados en el desarrollo de soluciones tecnológicas personalizadas, integrando hardware y software para crear experiencias únicas y sistemas funcionales.",
        contactTitle: "Contacto",
        aboutTitle: "About",
        
        // Servicios
        scienceResearch: "Ciencia & Investigación",
        scienceResearchText: "Prototipos y sistemas experimentales con sensores personalizados, adquisición de datos y conectividad para investigación científica.",
        digitalArt: "Arte Digital e Interactivo",
        digitalArtText: "Desarrollo de soluciones tecnológicas personalizadas para artistas que quieren incorporar elementos interactivos, sensores o sistemas de control en sus obras.",
        developments: "Desarrollos",
        developmentsText: "Desarrollos artísticos que combinan tecnología, sensores y actuadores con una mirada estética y aportes creativos. Desarrollo de soluciones para artistas que quieran encargar una parte de alguna pieza o el montaje/ etc soluciones creativas para artistas que quieren incorporar algo tecnológico en su obra. También tengo experiencia en montaje.",
        sustainability: "Sostenibilidad y Educación",
        sustainabilityText: "Sistemas educativos interactivos y herramientas de monitoreo ambiental. Desarrollo de experiencias de aprendizaje que conectan tecnología con conciencia ecológica.",
        
        // Tags
        filterByTags: "Filtrar por tags",
        
        // Contacto
        email: "Email",
        portfolioArt: "Portfolio Arte",
        name: "Nombre",
        message: "Mensaje",
        send: "Enviar"
    },
    en: {
        // Navegación
        home: "home",
        projects: "projects",
        contact: "contact",
        about: "about",
        services: "services",
        language: "language",
        
        // Home
        title: "Technological Developer & Artist",
        subtitle: "I create interactive experiences that connect digital with physical",
        description: "My work explores the intersection between technology, art and education, developing innovative solutions that transform how we interact with our environment.",
        
        // Secciones home
        whatIDo: "what do i do?",
        whatIDoText: "I develop custom hardware and software, create convivial technologies and interactive systems. I specialize in training, process digitization, data acquisition and analysis, human-machine interfaces, automation, rapid prototyping, sensor and actuator integration, and creative solutions for artists and educators.",
        whoIAm: "who am i?",
        whoIAmText: "I use sensors, microcontrollers and algorithms to develop systems that dialogue with their environment and with the people who inhabit them. My approach always seeks to make the invisible visible, whether through environmental data, biological processes or emergent behaviors in complex systems.",
        recentProjects: "recent projects",
        seeAllProjects: "See All Projects",
        knowMyServices: "Know My Services",
        
        // Páginas
        projectsTitle: "Projects",
        projectsIntro: "Custom software and hardware development. Sensors, data acquisition, digitization. Analog-digital / digital-analog translations. Human-machine interfaces. Convivial technologies, open-source, open-hardware.",
        servicesTitle: "Services",
        servicesIntro: "I offer specialized services in the development of customized technological solutions, integrating hardware and software to create unique experiences and functional systems.",
        contactTitle: "Contact",
        aboutTitle: "About",
        
        // Servicios
        scienceResearch: "Science & Research",
        scienceResearchText: "Prototypes and experimental systems with custom sensors, data acquisition and connectivity for scientific research.",
        digitalArt: "Digital & Interactive Art",
        digitalArtText: "Development of customized technological solutions for artists who want to incorporate interactive elements, sensors or control systems in their works.",
        developments: "Developments",
        developmentsText: "Artistic developments that combine technology, sensors and actuators with an aesthetic vision and creative contributions. Development of solutions for artists who want to commission a part of a piece or the assembly/ etc creative solutions for artists who want to incorporate something technological in their work. I also have experience in assembly.",
        sustainability: "Sustainability & Education",
        sustainabilityText: "Interactive educational systems and environmental monitoring tools. Development of learning experiences that connect technology with ecological awareness.",
        
        // Tags
        filterByTags: "Filter by tags",
        
        // Contacto
        email: "Email",
        portfolioArt: "Art Portfolio",
        name: "Name",
        message: "Message",
        send: "Send"
    },
    fr: {
        // Navegación
        home: "accueil",
        projects: "projets",
        contact: "contact",
        about: "à propos",
        services: "services",
        language: "langue",
        
        // Home
        title: "Développeur Technologique & Artiste",
        subtitle: "Je crée des expériences interactives qui connectent le numérique au physique",
        description: "Mon travail explore l'intersection entre technologie, art et éducation, développant des solutions innovantes qui transforment la façon dont nous interagissons avec notre environnement.",
        
        // Secciones home
        whatIDo: "que fais-je ?",
        whatIDoText: "Je développe du matériel et des logiciels personnalisés, crée des technologies conviviales et des systèmes interactifs. Je me spécialise dans la formation, la numérisation de processus, l'acquisition et l'analyse de données, les interfaces homme-machine, l'automatisation, le prototypage rapide, l'intégration de capteurs et d'actionneurs, et des solutions créatives pour les artistes et les éducateurs.",
        whoIAm: "qui suis-je ?",
        whoIAmText: "J'utilise des capteurs, des microcontrôleurs et des algorithmes pour développer des systèmes qui dialoguent avec leur environnement et avec les personnes qui les habitent. Mon approche cherche toujours à rendre visible l'invisible, que ce soit à travers des données environnementales, des processus biologiques ou des comportements émergents dans des systèmes complexes.",
        recentProjects: "projets récents",
        seeAllProjects: "Voir Tous les Projets",
        knowMyServices: "Connaître Mes Services",
        
        // Páginas
        projectsTitle: "Projets",
        projectsIntro: "Développement de logiciels et matériels personnalisés. Capteurs, acquisition de données, numérisation. Traductions analogique-numérique / numérique-analogique. Interfaces homme-machine. Technologies conviviales, open-source, open-hardware.",
        servicesTitle: "Services",
        servicesIntro: "J'offre des services spécialisés dans le développement de solutions technologiques personnalisées, intégrant matériel et logiciel pour créer des expériences uniques et des systèmes fonctionnels.",
        contactTitle: "Contact",
        aboutTitle: "À Propos",
        
        // Servicios
        scienceResearch: "Science & Recherche",
        scienceResearchText: "Prototypes et systèmes expérimentaux avec des capteurs personnalisés, acquisition de données et connectivité pour la recherche scientifique.",
        digitalArt: "Art Numérique & Interactif",
        digitalArtText: "Développement de solutions technologiques personnalisées pour les artistes qui veulent incorporer des éléments interactifs, des capteurs ou des systèmes de contrôle dans leurs œuvres.",
        developments: "Développements",
        developmentsText: "Développements artistiques qui combinent technologie, capteurs et actionneurs avec une vision esthétique et des contributions créatives. Développement de solutions pour les artistes qui veulent commander une partie d'une pièce ou l'assemblage/ etc solutions créatives pour les artistes qui veulent incorporer quelque chose de technologique dans leur travail. J'ai aussi de l'expérience en assemblage.",
        sustainability: "Durabilité & Éducation",
        sustainabilityText: "Systèmes éducatifs interactifs et outils de surveillance environnementale. Développement d'expériences d'apprentissage qui connectent la technologie avec la conscience écologique.",
        
        // Tags
        filterByTags: "Filtrer par tags",
        
        // Contacto
        email: "Email",
        portfolioArt: "Portfolio d'Art",
        name: "Nom",
        message: "Message",
        send: "Envoyer"
    }
};

// Idioma actual
let currentLanguage = 'es';

// Ruta base para las imágenes
const IMG_BASE = 'images/';

// Proyectos NIX (curados + actualizados)
const projects = [
    {
        id: 16,
        title: "GAD",
        description: "Sistema IoT para monitoreo y control inteligente de tanques de agua.",
        image: IMG_BASE + "GADMain.jpeg",
        tags: ["ciencia", "iot", "sostenibilidad","desarrollos"],
        details:
            "GAD es un sistema de gestión de agua que combina sensores de ultrasonido y caudalímetros para medir nivel y consumo en tanques domésticos o de edificios. Los datos se envían a una plataforma central en línea, desde la que se puede controlar de forma remota la apertura y cierre de la electroválvula de carga. Esto permite optimizar el uso del recurso, prevenir desabastecimientos y responder rápidamente a fugas o consumos inusuales. El diseño incluye módulos autónomos basados en ESP32 que se acoplan directamente a los tanques, con electrónica protegida y comunicación estable para contextos urbanos o zonas con escasez hídrica.",
        specs: [
            "MCU: ESP32 con conectividad WiFi",
            "Sensores: ultrasonido para nivel y caudalímetros para consumo",
            "Actuadores: electroválvula para carga controlada",
            "Plataforma: gestión remota online basada en Firebase",
            "Aplicación: optimización y control inteligente del agua"
        ],
        date: "2025-01-10"
    },
    {
        id: 15,
        title: "Flapp",
        description: "Plataforma BLE + app móvil para registrar parámetros del agua en laboratorio.",
        image: IMG_BASE + "FlappMain.jpg",
        tags: ["ciencia", "iot","investigación","sostenibilidad","desarrollos"],
        details:
            "Sistema modular y low-cost de adquisición para ensayos con membranas (ósmosis inversa/directa) u otros procesos físico-químicos. ESP32 alimentado por batería con sensórica intercambiable. App Flutter (Android/iOS) para visualizar tiempo real, registrar y exportar datos.",
        specs: [
            "MCU: ESP32",
            "App: Flutter (BT Low Energy)",
            "Sensores: pH, EC, ORP, presión, peso",
            "Exportación: .csv",
            "Uso: laboratorio/field portable"
        ],
        date: "2025-02-01"
    },
    {
        id: 19,
        title: "LIFE",
        description: "Monitoreo industrial para aguas grises con PLC Opta y reportes diarios online.",
        image: IMG_BASE + "LIFEMain.jpg",
        tags: ["ciencia", "iot","investigación","sostenibilidad","desarrollos"],
        details:
            "Implementación para el proyecto europeo LIFE BIODAPH2O: diseño y despliegue de un sistema robusto de adquisición y envío de datos en infraestructura real de aguas grises. Conexión de >10 sensores (pH, OD, temp., turbidez, conductividad, caudal) a un PLC Arduino Opta + expansión. Registros en tiempo real y envío de reportes .csv diarios a los equipos de investigación; comunicación por WiFi/4G y  MQTT para integración remota. Cableado y puesta en marcha con criterios industriales (bajo mantenimiento/alta disponibilidad).",
        specs: [
            "PLC: Arduino Opta + expansión",
            "Entradas: 4–20 mA / 0–10 V",
            "Sensores: pH, OD, turbidez, EC, caudal, temp.",
            "Comms: WiFi 4G, MQTT",
            "Automatización: reportes .csv diarios"
        ],
        date: "2025-03-15"
    },
    {
        id: 1,
        title: "Cerbero",
        description: "Ser híbrido de cañas, luz, sonido y sensores que reacciona a rayos cósmicos (muones).",
        image: IMG_BASE + "cerberoMain.JPG",
        tags: ["arte", "ciencia"],
        details:
            "Instalación interactiva que reimagina al guardián del inframundo como criatura tecno-orgánica. Un sensor de rayos cósmicos activa sonido, vibración e iluminación LED en una estructura de materiales naturales. Aborda el ‘subsuelo’ como mito, territorio y psique: lo que late bajo la superficie y lo invisible que nos atraviesa.",
        specs: [
            "Sensor: detección de muones DIY ('Cosmic Watch, MIT')",
            "Actuación: transductores + altavoces",
            "Iluminación: LED integrada",
            "Control: Arduino/microcontroladores",
            "Estructura: cañas + arena"
        ],
        date: "2024-02-01"
    },
    {
        id: 14,
        title: "Faktor",
        description: "Bomba de fluido fluorescente sincronizada con video.",
        image: IMG_BASE + "FaktorMain.jpg",
        tags: ["arte", "desarrollos","video"],
        details:
            "Instalación desarrollada para 'Cuando dejamos de entender el mundo' (Faktor, Milán). Circuito de mangueras con líquido fluorescente cuyo flujo se sincroniza con una pieza de video. Control integral desde Raspberry Pi con scripts para timing, autonomía y robustez in-situ.",
        specs: [
            "Control: Raspberry Pi (Python/Shell)",
            "Actuación: bomba peristáltica + válvulas",
            "Sincronía: OSC/tiempos programados",
            "Iluminación: LEDs UV",
            "Montaje: metacrilato + aluminio"
        ],
        date: "2023-10-01"
    },
    {
        id: 17,
        title: "Gino Rubert",
        description: "Cuadros con radar Doppler: la presencia revela imágenes ocultas por luz interna.",
        image: IMG_BASE + "GinoMain.jpg",
        tags: ["arte", "desarrollos","luz","sonido"],
        details:
            "Desarrollo de electrónica embebida en marcos: sensores Doppler detectan presencia y disparan un sistema de LED con fade in/out que muestra una capa pictórica oculta. Proyecto expuesto en distintos espacios (p.ej., Tecla Sala, 2023) y en evolución técnica continua.",
        specs: [
            "Sensado: radar Doppler de presencia",
            "Iluminación: LED de alto CRI",
            "Control: placas a medida (Arduino)",
            "Alimentación: 12 V discreta",
            "Integración: bastidor/marco"
        ],
        date: "2023-10-01"
    },
    {
        id: 20,
        title: "Multiverso",
        description: "Mural que se “pinta con luz”: encendido autónomo por horarios y coreografía lumínica.",
        image: IMG_BASE + "multiversoMain.jpg",
        tags: ["arte", "luz"],
        details:
            "Instalación lumínica autónoma en espacio público/comunitario. Secuencias programadas activan sectores del mural en franjas horarias, generando capas visuales dinámicas sin intervención humana. Batería recargable, fácil mantenimiento y ajuste de comportamiento por calendario.",
        specs: [
            "Controlador programable (MCU)",
            "Coreografías LED",
            "Temporización horaria",
            "Alimentación: batería recargable",
            "Modo: autónomo/portátil"
        ],
        date: "2023-05-01"
    },
    {
        id: 2,
        title: "Biota",
        description: "Estructura reticular sensible: movimiento del público activa paisajes sonoros.",
        image: IMG_BASE + "biotaMain.jpg",
        tags: ["arte", "investigación","sonido","luz","educación"],
        details:
            "Instalación multimedia surgida del programa Bolit Mentor (secundaria de Girona). Integra composiciones de estudiantes activadas por PIR. El audio suena por altavoces y transductores en la estructura, permitiendo percibir la obra por tacto y ampliando la accesibilidad.",
        specs: [
            "MCU: Arduino",
            "Audio: altavoces + transductores",
            "Sensores: PIR + ambiente",
            "Luz: pixel LED",
            "Software: playback/síntesis"
        ],
        date: "2023-11-30"
    },
    /*{
      id: 14_2,
      title: "Relics",
      description: "Esculturas cerámicas táctiles como instrumentos MIDI; interfaz sensible y compacta.",
      image: IMG_BASE + "relicsMain.jpg",
      tags: ["arte", "performance"],
      details:
        "Colaboración con Dania Shihab (Sónar 2025): cerámicas diseñadas en 3D con discos de cobre y 12 sensores capacitivos MPR121 por pieza. Arduino Micro actúa como interfaz MIDI-USB; cada contacto dispara eventos/gestos sonoros en tiempo real. Optimizado para fiabilidad táctil y montaje escénico.",
      specs: [
        "Interfaz: Arduino Micro (MIDI-USB)",
        "Sensores: MPR121 capacitivos",
        "Electrodos: cobre integrado en cerámica",
        "Soft: entorno/DAW tiempo real",
        "Diseño: modular y escalable"
      ],
      date: "2025-06-01"
    },*/
    {
        id: 22,
        title: "Playing God",
        description: "Biointerfaz planta–máquina: sensores traducen respuestas vegetales a sonido.",
        image: IMG_BASE + "playingGodMain.jpg",
        tags: ["arte", "ciencia","investigación"],
        details:
            "Investigación artística financiada por OSIC que explora sensibilidad vegetal. Tres dispositivos: (1) sensor suelo/ambiente (pH, EC, NPK, temp., luz, presencia), (2) sensor galvánico en hojas para micro-variaciones eléctricas, (3) módulo ambiental de aire (O₂/CO₂). Traducción sonora (Max/MSP) y registro de reacciones.",
        specs: [
            "Sensores: pH, EC, NPK, temp., luz, presencia",
            "Electrodos: pads galvánicos",
            "Soft: Max/MSP",
            "Energía: panel solar + batería",
            "Datos: logging/visualización"
        ],
        date: "2022-09-15"
    },
    {
        id: 18,
        title: "Kit Ambiental",
        description: "Kit modular open-source: sensores para campo educativo/ciencia ciudadana.",
        image: IMG_BASE + "kitAmbientalMain.jpg",
        tags: ["ciencia", "educación","sostenibilidad","desarrollos"],
        details:
            "Plataforma DIY para observación y registro en exterior: carcasa 3D resistente a intemperie, alimentación solar/batería y sensores intercambiables (agua/aire/suelo). Registro local (SD) o envío BLE/WiFi. Pensado para talleres y trabajo comunitario.",
        specs: [
            "MCU: ESP32",
            "Almacenamiento: microSD",
            "Conectividad: BLE/WiFi",
            "Sensores: DHT22, MQ, TDS, turbidez, etc.",
            "Alimentación: solar o batería"
        ],
        date: "2024-07-01"
    },
    {
        id: 10,
        title: "DeCent",
        description: "Módulo autónomo para saneamiento/monitoreo de aire. Conjunto de sensores y actuadores conectados vía bluetooth a una interfaz gráfica que permite visualizar y guardar datos para investigación científica.",
        image: IMG_BASE + "decentMain.jpg",
        tags: ["ciencia", "sostenibilidad","investigación","desarrollos"],
        details:
            "Instalación experimental (decentralized + sensing + sanitation) para contextos rurales/itinerantes. Sensado de gases (metano/CO₂), humedad y temperatura de aire/suelo, logging en SD y operación autónoma con energía solar. Plataforma para prácticas eco-tecnológicas.",
        specs: [
            "MCU: ESP32",
            "Sensores: CH₄ (100%), CO₂ (100%), O2, H2, pH",
            "Actuadores: 5 x Bombas Peristálticas",
            "Registro: microSD",
            "Energía: multivoltaje DC",
            "Formato: caja modular transportable"
        ],
        date: "2023-01-01"
    },
    {
        id: 3,
        title: "a-sync",
        description: "Polifonía desincronizada: luz y sonido generan patrones fuera de fase.",
        image: IMG_BASE + "async.jpg",
        tags: ["arte", "sonido", "ciencia","luz"],
        details:
            "Instalación de vibración/azar: transductores convierten vidrios en membranas resonantes. Capas de audio y luz se desfasan para producir pulsos que se alinean/desalinean en el espacio.",
        specs: [
            "Audio: multicanal",
            "Control: MIDI/MaxMSP",
            "Iluminación: Esculturas led con software personalizado",
            "Actuación: transductores"
        ],
        date: "2023-02-15"
    },
    {
        id: 4,
        title: "silencios inquietos",
        description: "Granulado de ruido blanco espacializado que esculpe el silencio como materia.",
        image: IMG_BASE + "silenciosInquietosMain.jpg",
        tags: ["arte", "sonido"],
        details:
            "Cinco estructuras sostienen 30 parlantes controlados por algoritmo generativo. La obra desplaza la escucha hacia una experiencia activa del ‘silencio’ y sugiere el espacio como narrativa sonora.",
        specs: [
            "30 parlantes + 30 relés",
            "Control: Arduino",
            "Algoritmo: generativo",
            "Audio: granos de ruido blanco",
            "Site: CCK (2019)"
        ],
        date: "2021-12-15"
    },
    {
        id: 5,
        title: "habittat",
        description: "Serie generativa (2015–2018): actuadores sonoros/luz moldean la percepción del espacio.",
        image: IMG_BASE + "HabittatMain.jpg",
        tags: ["arte", "sonido"],
        details:
            "Intervenciones que sitúan actuadores lumínicos y sonoros para componer secuencias orgánicas mediante microcontroladores. Un recorrido que re-entiende el espacio por estímulos visuales/acústicos.",
        specs: [
            "Algoritmo generativo",
            "Actuadores de luz y golpeadores",
            "Microcontroladores",
            "Formato: site-specific",
            "Periodo: 2015–2018"
        ],
        date: "2020-08-15"
    },
    {
        id: 21,
        title: "noias",
        description: "Dispositivos sonoros que detectan la cercanía del oído y reproducen grabaciones hechas en ese mismo punto geográfico.",
        image: IMG_BASE + "noiasMain.jpg",
        tags: ["arte", "sonido","desarrollos"],
        details:
            "Dispositivos autónomos con Arduino Nano y sensor de ultrasonido que detectan la cercanía del oído para activar un altavoz. Cada uno reproduce un audio grabado en ese mismo lugar, conectando presencia física, memoria y territorio a través de la escucha.",
        specs: [
            "Sensores: de cercanía (ultrasonido)",
            "Actuadores: altavoces",
            "Control: Arduino Nano, activación por cercanía",
            "Ambiente: mapa de la devesa de Salt"
        ],
        date: "2022-09-01"
    },
    {
        id: 7,
        title: "micro-bio",
        description: "Sistema experimental para la captura y reducción de CO₂ en espacios interiores.",
        image: IMG_BASE + "microBioMain.JPG",
        tags: ["ciencia","investigación","desarrollos"],
        details:
        "Proyecto de investigación científica que integra sensores de CO₂, bombas, electroválvulas y láminas resistivas para extraer y almacenar CO₂ del aire interior. Registra datos en tarjeta SD y ofrece visualización mediante una app en Flutter, incluso en modo offline. Primera fase del proyecto Decent, con enfoque en sostenibilidad y reutilización de recursos.",
        specs: [
            "MCU: Arduino Mega 2560",
            "Sensores: CO₂ industriales",
            "Actuadores: bombas de aire, electroválvulas, láminas resistivas calefactadas",
            "Almacenamiento: tarjeta SD",
            "Conectividad: App Flutter con soporte offline",
            "Alimentación: 12 V",
            "Sistema de captura y almacenamiento de gas"
        ],
        date: "2022-11-03"
    },
    {
        id: 6,
        title: "mutaciones",
        description: "Sistema lumínico generativo: Max/MSP y Arduino Mega conmutan tubos fluorescentes mediante patrones aleatorios inspirados en el I‑Ching.",
        image: IMG_BASE + "mutacionesMain.png",
        tags: ["arte","luz"],
        details:
        "Instalación que conecta Max/MSP con una matriz de relés controlada por Arduino Mega para encender y apagar tubos fluorescentes. Cada ejecución genera combinaciones diferentes de encendidos, componiendo imágenes lumínicas siempre cambiantes. El algoritmo introduce azar y reglas simples para mutar ritmos y composiciones, evocando el I‑Ching como motor de variación.",
        specs: [
            "MCU: Arduino Mega 2560",
            "Software: Max/MSP (control y secuenciación)",
            "Interfaz: comunicación serial Max ⇄ Arduino",
            "Actuadores: caja de relés + tubos fluorescentes",
            "Algoritmos: patrones aleatorios/generativos",
        ],
        date: "2022-12-15"
    },
    {
        id: 26_2,
        title: "Interferencias Cósmicas",
        description: "Detector DIY de muones + visual/sonificación en tiempo real (Pure Data).",
        image: IMG_BASE + "rayosCosmicosMain.jpg",
        tags: ["arte", "ciencia","investigación"],
        details:
            "Investigación sobre rayos cósmicos y su traducción sensorial. Prototipo con centelladores y adquisición de datos; los impactos se envían a Pure Data para generar visuales reactivos y capas sonoras. Proyecto orientado a documentación abierta y replicabilidad.",
        specs: [
            "Detección: centelladores",
            "Control: Arduino Nano",
            "Visual/Sonido: Pure Data",
            "Foco: ciencia ciudadana/DIY",
            "Estado: prototipo en evolución"
        ],
        date: "2024-09-01"
    },
    {
        id: 8,
        title: "Introducción a la programación y la electrónica",
        description: "Kit/curso progresivo para iniciar en MCU, sensores y control.",
        image: IMG_BASE + "introduccionElectronica.jpg",
        tags: ["educación","ciencia"],
        details:
            "Diseño de talleres modulares (2022–actualidad) con enfoque DIY y soberanía tecnológica: sensores ambientales, construcción de dispositivos interactivos y automatización con Arduino/ESP32. Adaptable a escuelas, universidades, festivales e instituciones.",
        specs: [
            "MCU: Arduino/ESP32",
            "Componentes: sensores/actuadores",
            "Formato: >15 prácticas",
            "Software: libre",
            "Metodología: aprendizaje colectivo"
        ],
        date: "2024-12-13"
    },
    {
        id: 11,
        title: "Erik Estany Tigerstorm",
        description: "Soporte técnico/AV: adaptación de obras, montaje, sincronía de pantallas y controladores.",
        image: IMG_BASE + "ErikPantallitasMain.jpg",
        tags: ["arte", "desarrollos","video"],
        details:
            "Desarrollo/montaje para la expo ‘Del que pasa a fora’ (Viphoto Fest y Sala Amárica): integración de pantallas OLED/HDMI, controladores personalizados, sincronización y automatización para funcionamiento continuo.",
        specs: [
            "Control: Raspberry Pi + Arduino",
            "Displays: OLED/HDMI",
            "Integración: interfaces a medida",
            "Sincronización: playback estable",
            "Servicio: montaje integral"
        ],
        date: "2022-06-01"
    },
    {
        id: 23,
        title: "Aleatoriedades",
        description: "La rama de un árbol atrapada en un loop constante. Land-art.",
        image: IMG_BASE + "AleatoriedadesMain.png",
        tags: ["arte", "land art"],
        details:
          "Tras una tormenta, una rama quedó atrapada en un ciclo repetitivo: un extremo sujeto a piedras, el otro rebotando sobre el agua. Mi intervención reforzó su estructura y anclaje para que el movimiento persistiera, extendiendo un instante fortuito hacia una observación prolongada.",
        specs: [
          "Ubicación: El Volcán, San Luis (Argentina)",
          "Medio: land-art, intervención site-specific",
          "Materiales: rama, piedras, cuerda/refuerzo",
          "Técnica: ajuste de anclaje y estructura con piedras y madera",
          "Duración: variable, según condiciones naturales"
        ],
        date: "2018-12-15"
    },
    {
        id: 24,
        title: "Luciérnagas",
        description: "Luces led con sistema y conexión personalizada crea una sinfonía luminiscente que rinde tributo a las luciérnagas.",
        image: IMG_BASE + "luciernagasMain.png",
        tags: ["arte", "luz"],
        details:
            "Instalación lumínica compuesta por LEDs conectados a un sistema de control diseñado a medida. El conjunto genera pulsos y destellos que evocan el comportamiento de las luciérnagas, transformando el espacio en una coreografía de luz que oscila entre lo natural y lo artificial.",        
        specs: [
            "MCU: Arduino Nano",
            "Luz: LED",
            "Sensores: fotodiodos",
            "Energía: batería recargable",
            "Outdoor: IP65"
        ],
        date: "2020-07-15"
    },
    {
        id: 12,
        title: "Dispositivos Domótica Personalizados",
        description: "Sistemas a medida para control remoto de iluminación, sonido y accesos.",
        image: IMG_BASE + "domoticaMain.jpg",
        tags: ["domótica", "desarrollos"],
        details:
          "Desarrollo de dispositivos personalizados que requería avisos sonoros programados, control de iluminación y apertura/cierre remoto de puertas. El sistema, basado en ESP32, integra reproductor de audio DFPlayer, relés y cerraduras electromagnéticas, operando de forma centralizada y adaptable a distintas rutinas horarias.",
        specs: [
          "MCU: ESP32",
          "Audio: DFPlayer Mini + altavoz",
          "Actuadores: relés + cerraduras electromagnéticas",
          "Funciones: avisos sonoros programados, control de iluminación, apertura/cierre de puertas",
          "Conectividad: WiFi"
        ],
        date: "2024-06-10"
    },
    {
        id: 13,
        title: "Todo lo que flota tiene que flotar",
        description: "Instalación efímera de flotabilidad, equilibrio y azar en entorno natural.",
        image: IMG_BASE + "todoLoQueFlotaMain.png",
        tags: ["arte", "land art"],
        details:
            "Ensayo sobre tensión capilar, vasos comunicantes, densidad y formas inestables usando hojas, ramas, piedras, agua y objetos locales. Registro audiovisual y partitura de acciones.",
        specs: [
            "Site: Canet de Adri",
            "Materiales: orgánicos/in situ",
            "Acción: coreografías/percusión",
            "Documento: video",
            "Formato: efímero"
        ],
        date: "2020-09-01"
    },
    {
        id: 27,
        title: "Insectodrom",
        description: "Sistema de streaming DIY para hostales de insectos con Raspberry Pi y energía solar.",
        image: IMG_BASE + "insectodromMain.png",
        tags: ["ciencia", "investigación", "iot", "sostenibilidad", "video", "desarrollos"],
        details:
            "Desarrollo técnico para el proyecto Insectodrom del centro de arte contemporáneo BLOIT, que explora la relación entre humanos, insectos y ciudades. Mi contribución consistió en diseñar e implementar un sistema completo de streaming en vivo para hostales de insectos, utilizando Raspberry Pi con módulo de cámara CAPI CAM. El sistema transmite 24/7 por Twitch, mostrando la vida de los insectos en tiempo real, y está alimentado completamente por energía solar. Además, creé un video tutorial completo que explica paso a paso cómo replicar este sistema low-cost y DIY para que otros puedan implementar sus propios streams de biodiversidad urbana.",
        specs: [
            "Hardware: Raspberry Pi + módulo CAPI CAM",
            "Streaming: transmisión 24/7 por Twitch",
            "Energía: sistema solar autónomo",
            "Software: programación personalizada para streaming",
            "Documentación: video tutorial DIY completo",
            "Aplicación: monitoreo de biodiversidad urbana en tiempo real"
        ],
        date: "2023-04-27"
    }
];

// Variables globales
let currentPage = 'home';
let activeFilters = [];
let filteredProjects = [...projects];
// Orden inicial por fecha descendente
filteredProjects = [...projects].sort((a, b) => new Date(b.date) - new Date(a.date));

// Inicialización cuando el DOM está listo
document.addEventListener('DOMContentLoaded', function () {
    initializeNavigation();
    initializeTagFilters();
    initializeModal();
    initializeContactForm();
    initializeServicesPage();
    initializeLanguageSelector(); // Llamar la nueva función

    // Renderizado inicial con animación
    setTimeout(() => {
        renderProjectsAnimated();
        
        // Test directo de las service cards
        const testCards = document.querySelectorAll('.service-card');
        console.log('Test directo - Service cards encontradas:', testCards.length);
        testCards.forEach(card => {
            card.addEventListener('click', function() {
                console.log('Click directo en service card!');
                const serviceType = this.getAttribute('data-service');
                if (serviceType) {
                    navigateToServiceProjects(serviceType);
                }
            });
        });
        
        // Inicializar highlights clickeables del home
        initializeHomeHighlights();
    }, 100);
    
    // Renderizar proyectos recientes después de un poco más de tiempo
    setTimeout(() => {
        console.log('Ejecutando renderRecentProjects...');
        renderRecentProjects();
    }, 300);
});

// Navegación entre páginas
function initializeNavigation() {
    const navItems = document.querySelectorAll('.nav-item');

    navItems.forEach(item => {
        item.addEventListener('click', function (e) {
            e.preventDefault();
            const targetPage = this.getAttribute('data-page');
            navigateToPage(targetPage);

            // Actualizar estado activo
            navItems.forEach(nav => nav.classList.remove('active'));
            this.classList.add('active');

            // Mostrar/ocultar submenu de tags
            toggleTagsSubmenu(targetPage);
        });
    });
}

// Función para mostrar/ocultar submenu de tags
function toggleTagsSubmenu(page) {
    const tagsSubmenu = document.getElementById('tags-submenu');
    if (tagsSubmenu) {
        if (page === 'projects') {
            tagsSubmenu.style.display = 'block';
        } else {
            tagsSubmenu.style.display = 'none';
        }
    }
}

// Función para cambiar idioma
function changeLanguage(lang) {
    currentLanguage = lang;
    
    // Actualizar botones de idioma
    document.querySelectorAll('.language-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    document.querySelector(`[data-lang="${lang}"]`).classList.add('active');
    
    // Aplicar traducciones
    applyTranslations();
}

// Función para aplicar traducciones
function applyTranslations() {
    const t = translations[currentLanguage];
    
    // Navegación
    document.querySelectorAll('[data-page="home"]').forEach(el => el.textContent = t.home);
    document.querySelectorAll('[data-page="projects"]').forEach(el => el.textContent = t.projects);
    document.querySelectorAll('[data-page="contact"]').forEach(el => el.textContent = t.contact);
    document.querySelectorAll('[data-page="about"]').forEach(el => el.textContent = t.about);
    document.querySelectorAll('[data-page="services"]').forEach(el => el.textContent = t.services);
    
    // Home
    document.querySelector('.home-text h2').textContent = t.title;
    document.querySelector('.home-description').textContent = t.description;
    document.querySelector('.home-what-i-do h3').textContent = t.whatIDo;
    document.querySelector('.home-what-i-do p').textContent = t.whatIDoText;
    document.querySelector('.recent-projects h3').textContent = t.recentProjects;
    document.querySelector('[data-page="projects"]').textContent = t.seeAllProjects;
    document.querySelector('[data-page="services"]').textContent = t.knowMyServices;
    
    // Páginas
    document.querySelector('#projects-page h1').textContent = t.projectsTitle;
    document.querySelector('#projects-page .intro p').textContent = t.projectsIntro;
    document.querySelector('#services-page h1').textContent = t.servicesTitle;
    document.querySelector('#services-page .services-intro p').textContent = t.servicesIntro;
    document.querySelector('#contact-page h1').textContent = t.contactTitle;
    document.querySelector('#about-page h1').textContent = t.aboutTitle;
    
    // Servicios
    document.querySelector('.service-card:nth-child(1) h3').textContent = t.scienceResearch;
    document.querySelector('.service-card:nth-child(1) p').textContent = t.scienceResearchText;
    document.querySelector('.service-card:nth-child(2) h3').textContent = t.digitalArt;
    document.querySelector('.service-card:nth-child(2) p').textContent = t.digitalArtText;
    document.querySelector('.service-card:nth-child(3) h3').textContent = t.developments;
    document.querySelector('.service-card:nth-child(3) p').textContent = t.developmentsText;
    document.querySelector('.service-card:nth-child(4) h3').textContent = t.sustainability;
    document.querySelector('.service-card:nth-child(4) p').textContent = t.sustainabilityText;
    
    // Tags
    document.querySelector('.tags-submenu h3').textContent = t.filterByTags;
    
    // Contacto
    document.querySelector('.contact-info strong:first-of-type').textContent = t.email + ':';
    document.querySelector('.contact-info strong:last-of-type').textContent = t.portfolioArt + ':';
    document.querySelector('label[for="name"]').textContent = t.name;
    document.querySelector('label[for="message"]').textContent = t.message;
    document.querySelector('button[type="submit"]').textContent = t.send;
}

function navigateToPage(page) {
    // Ocultar todas las páginas
    const pages = document.querySelectorAll('.page');
    pages.forEach(p => p.classList.add('hidden'));

    // Mostrar la página seleccionada
    const targetPage = document.getElementById(`${page}-page`);
    if (targetPage) {
        targetPage.classList.remove('hidden');
        currentPage = page;
    }
}

// Sistema de filtros por tags
function initializeTagFilters() {
    const tagButtons = document.querySelectorAll('.tag-filter');

    tagButtons.forEach(button => {
        button.addEventListener('click', function () {
            const tag = this.getAttribute('data-tag');
            toggleTagFilter(tag, this);
        });
    });
}

function toggleTagFilter(tag, buttonElement) {
    const index = activeFilters.indexOf(tag);

    if (index > -1) {
        // Remover filtro
        activeFilters.splice(index, 1);
        buttonElement.classList.remove('active');
    } else {
        // Agregar filtro
        activeFilters.push(tag);
        buttonElement.classList.add('active');
    }

    filterProjects();
}

function filterProjects() {
    // Primero, animar la salida de los elementos actuales
    const currentCards = document.querySelectorAll('.project-card');

    // Agregar clase de fade-out a todos los elementos actuales
    currentCards.forEach((card, index) => {
        setTimeout(() => {
            card.classList.add('fade-out');
        }, index * 50); // Retraso escalonado
    });

    // Después de que termine la animación de salida, filtrar y mostrar nuevos elementos
    setTimeout(() => {
        if (activeFilters.length === 0) {
            // Sin filtros → mostrar todos los proyectos ordenados por fecha descendente
            filteredProjects = [...projects].sort((a, b) => new Date(b.date) - new Date(a.date));
        } else {
            // Filtrar y ordenar por fecha descendente
            filteredProjects = projects
                .filter(project => project.tags.some(tag => activeFilters.includes(tag)))
                .sort((a, b) => new Date(b.date) - new Date(a.date));
        }

        renderProjectsAnimated();
    }, currentCards.length * 50 + 200); // Esperar a que termine la animación de salida
}

// Renderizado de proyectos (versión inicial sin animaciones)
function renderProjects() {
    const container = document.getElementById('projects-container');

    if (filteredProjects.length === 0) {
        container.innerHTML = '<p style="text-align: center; color: #666;">No hay proyectos que coincidan con los filtros seleccionados.</p>';
        return;
    }

    container.innerHTML = filteredProjects
        .map(
            project => `
          <div class="project-card" data-project-id="${project.id}">
            <div class="project-image">
              <img src="${project.image}" alt="${project.title}" loading="lazy">
            </div>
            <h3 class="project-title">${project.title}</h3>
            <p class="project-description">${project.description}</p>
            <div class="project-tags">
              ${project.tags.map(tag => `<span class="project-tag">${tag}</span>`).join('')}
            </div>
          </div>
        `
        )
        .join('');

    addProjectCardListeners();
}

// Renderizado animado de proyectos
function renderProjectsAnimated() {
    const container = document.getElementById('projects-container');

    if (filteredProjects.length === 0) {
        container.innerHTML = '<p style="text-align: center; color: #666; opacity: 0;" class="no-projects">No hay proyectos que coincidan con los filtros seleccionados.</p>';
        // Animar la entrada del mensaje
        setTimeout(() => {
            const message = container.querySelector('.no-projects');
            if (message) {
                message.style.transition = 'opacity 0.5s ease';
                message.style.opacity = '1';
            }
        }, 100);
        return;
    }

    // Crear elementos con opacidad 0 para animación de entrada
    container.innerHTML = filteredProjects
        .map(
            project => `
          <div class="project-card" data-project-id="${project.id}" style="opacity: 0; transform: scale(0.8) translateY(30px);">
            <div class="project-image">
              <img src="${project.image}" alt="${project.title}" loading="lazy">
            </div>
            <h3 class="project-title">${project.title}</h3>
            <p class="project-description">${project.description}</p>
            <div class="project-tags">
              ${project.tags.map(tag => `<span class="project-tag">${tag}</span>`).join('')}
            </div>
          </div>
        `
        )
        .join('');

    // Animar la entrada de cada card con retraso escalonado
    const newCards = container.querySelectorAll('.project-card');
    newCards.forEach((card, index) => {
        setTimeout(() => {
            card.style.transition = 'all 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
            card.style.opacity = '1';
            card.style.transform = 'scale(1) translateY(0) rotate(0deg)';

            // Agregar una pequeña rotación aleatoria durante la animación para más organicidad
            const randomRotation = (Math.random() - 0.5) * 2; // Entre -1 y 1 grado
            card.style.transform = `scale(1) translateY(0) rotate(${randomRotation}deg)`;

            setTimeout(() => {
                card.style.transform = 'scale(1) translateY(0) rotate(0deg)';
            }, 300);
        }, index * 100 + 50); // Retraso escalonado para entrada orgánica
    });

    addProjectCardListeners();
}

// Función auxiliar para agregar event listeners a las cards
function addProjectCardListeners() {
    const projectCards = document.querySelectorAll('.project-card');
    projectCards.forEach(card => {
        card.addEventListener('click', function () {
            const projectId = parseInt(this.getAttribute('data-project-id'));
            openProjectModal(projectId);
        });
    });
}

// Sistema de modal para proyectos expandidos
function initializeModal() {
    const modal = document.getElementById('project-modal');
    const closeButton = document.querySelector('.close-modal');

    if (closeButton) {
        closeButton.addEventListener('click', closeModal);
    }

    if (modal) {
        modal.addEventListener('click', function (e) {
            if (e.target === modal) {
                closeModal();
            }
        });
    }

    // Cerrar modal con ESC
    document.addEventListener('keydown', function (e) {
        const m = document.getElementById('project-modal');
        if (e.key === 'Escape' && m && !m.classList.contains('hidden')) {
            closeModal();
        }
    });
}

function openProjectModal(projectId) {
    const project = projects.find(p => p.id === projectId);
    if (!project) return;

    const modalBody = document.getElementById('modal-body');
    if (modalBody) {
        modalBody.innerHTML = `
        <div class="modal-project-content">
          <h2>${project.title}</h2>
          <div class="project-image">
            <img src="${project.image}" alt="${project.title}">
          </div>
          <div class="project-details">
            ${project.details}
          </div>
          <div class="project-specs">
            <h3>Especificaciones Técnicas:</h3>
            <ul>
              ${project.specs.map(spec => `<li>• ${spec}</li>`).join('')}
            </ul>
          </div>
          <div class="project-tags">
            ${project.tags.map(tag => `<span class="project-tag">${tag}</span>`).join('')}
          </div>
        </div>
      `;
    }

    const modal = document.getElementById('project-modal');
    if (modal) {
        modal.classList.remove('hidden');
    }
    document.body.style.overflow = 'hidden'; // Prevenir scroll del body
}

function closeModal() {
    const modal = document.getElementById('project-modal');
    if (modal) {
        modal.classList.add('hidden');
    }
    document.body.style.overflow = 'auto'; // Restaurar scroll del body
}

// Formulario de contacto
function initializeContactForm() {
    const form = document.querySelector('.contact-form');
    if (!form) return;

    form.addEventListener('submit', function (e) {
        e.preventDefault();

        const formData = new FormData(form);
        const data = {
            name: formData.get('name'),
            email: formData.get('email'),
            message: formData.get('message')
        };

        // Simular envío del formulario
        console.log('Datos del formulario:', data);

        // Mostrar mensaje de confirmación
        alert('¡Gracias por tu mensaje! Te contactaré pronto.');

        // Limpiar formulario
        form.reset();
    });
}

// Funciones utilitarias
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

// Responsive: manejo del menú en móvil
function initializeMobileMenu() {
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const sidebar = document.querySelector('.sidebar');
    
    if (mobileMenuBtn && sidebar) {
        mobileMenuBtn.addEventListener('click', function() {
            sidebar.classList.toggle('open');
            
            // Agregar overlay para cerrar al hacer click fuera
            let overlay = document.querySelector('.sidebar-overlay');
            if (!overlay) {
                overlay = document.createElement('div');
                overlay.className = 'sidebar-overlay';
                document.body.appendChild(overlay);
            }
            
            if (sidebar.classList.contains('open')) {
                overlay.classList.add('open');
                overlay.addEventListener('click', function() {
                    sidebar.classList.remove('open');
                    overlay.classList.remove('open');
                });
            } else {
                overlay.classList.remove('open');
            }
        });
    }
    
    // Detectar clicks fuera del sidebar en móvil para cerrarlo
    document.addEventListener('click', function (e) {
        if (window.innerWidth <= 768) {
            if (sidebar && !sidebar.contains(e.target)) {
                sidebar.classList.remove('open');
            }
        }
    });
}



// Función para renderizar proyectos recientes en el home
function renderRecentProjects() {
    const recentContainer = document.getElementById('recent-projects-container');
    console.log('Buscando contenedor de proyectos recientes:', recentContainer);
    if (!recentContainer) {
        console.log('No se encontró el contenedor de proyectos recientes');
        return;
    }

    console.log('Total de proyectos disponibles:', projects.length);
    console.log('Proyectos:', projects);

    // Obtener los 3 últimos proyectos (ordenados por fecha)
    let recentProjects;
    try {
        recentProjects = [...projects]
            .sort((a, b) => new Date(b.date) - new Date(a.date))
            .slice(0, 3);
    } catch (error) {
        console.log('Error ordenando por fecha, tomando primeros 3 proyectos:', error);
        recentProjects = projects.slice(0, 3);
    }

    console.log('Proyectos recientes seleccionados:', recentProjects);
    if (recentProjects.length === 0) {
        console.log('No hay proyectos recientes');
        return;
    }

    recentContainer.innerHTML = recentProjects
        .map(project => `
            <div class="project-card recent" data-project-id="${project.id}">
                <div class="project-image">
                    <img src="${project.image}" alt="${project.title}" loading="lazy">
                </div>
                <h3 class="project-title">${project.title}</h3>
                <p class="project-description">${project.description}</p>
                <div class="project-tags">
                    ${project.tags.map(tag => `<span class="project-tag">${tag}</span>`).join('')}
                </div>
            </div>
        `)
        .join('');

    // Agregar event listeners a las cards recientes
    const recentCards = recentContainer.querySelectorAll('.project-card');
    recentCards.forEach(card => {
        card.addEventListener('click', function () {
            const projectId = parseInt(this.getAttribute('data-project-id'));
            openProjectModal(projectId);
        });
    });
}

// Función para inicializar la página de servicios
function initializeServicesPage() {
    const contactLinks = document.querySelectorAll('.contact-link');
    
    contactLinks.forEach(link => {
        link.addEventListener('click', function (e) {
            e.preventDefault();
            const targetPage = this.getAttribute('data-page');
            navigateToPage(targetPage);
            
            // Actualizar estado activo en la navegación
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(nav => nav.classList.remove('active'));
            const targetNav = document.querySelector(`[data-page="${targetPage}"]`);
            if (targetNav) {
                targetNav.classList.add('active');
            }
        });
    });
    
    // Inicializar cards de servicios clickeables
    initializeServiceCards();
}

// Función para inicializar el selector de idioma
function initializeLanguageSelector() {
    const languageBtns = document.querySelectorAll('.language-btn');
    
    languageBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            const lang = this.getAttribute('data-lang');
            changeLanguage(lang);
        });
    });
}

// Inicializar cards de servicios clickeables
function initializeServiceCards() {
    const serviceCards = document.querySelectorAll('.service-card.clickable');
    console.log('Service cards encontradas:', serviceCards.length);
    
    if (serviceCards.length === 0) {
        console.log('No se encontraron service cards con clase clickable');
        // Intentar con solo service-card
        const allServiceCards = document.querySelectorAll('.service-card');
        console.log('Total de service cards encontradas:', allServiceCards.length);
    }
    
    serviceCards.forEach(card => {
        console.log('Agregando click listener a:', card.getAttribute('data-service'));
        card.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            console.log('Click en service card:', this.getAttribute('data-service'));
            const serviceType = this.getAttribute('data-service');
            navigateToServiceProjects(serviceType);
        });
    });
}

// Función para navegar a proyectos con tags filtrados según el servicio
function navigateToServiceProjects(serviceType) {
    // Navegar a la página de proyectos
    navigateToPage('projects');
    
    // Actualizar estado activo en la navegación
    const navItems = document.querySelectorAll('.nav-item');
    navItems.forEach(nav => nav.classList.remove('active'));
    const projectsNav = document.querySelector('[data-page="projects"]');
    if (projectsNav) {
        projectsNav.classList.add('active');
    }
    
    // Mostrar submenu de tags
    toggleTagsSubmenu('projects');
    
    // Filtrar por tags según el servicio
    setTimeout(() => {
        filterByService(serviceType);
    }, 100);
}

// Función para filtrar proyectos según el servicio
function filterByService(serviceType) {
    const tagFilters = document.querySelectorAll('.tag-filter');
    
    // Limpiar filtros activos
    tagFilters.forEach(filter => filter.classList.remove('active'));
    
    // Activar tags según el servicio
    switch(serviceType) {
        case 'ciencia-investigacion':
            activateTags(['ciencia', 'investigación', 'iot', 'sensores']);
            break;
        case 'arte-digital':
            activateTags(['arte', 'desarrollos', 'sonido', 'luz']);
            break;
        case 'desarrollos':
            activateTags(['desarrollos', 'investigación', 'ciencia']);
            break;
        case 'sostenibilidad-educacion':
            activateTags(['sostenibilidad', 'educación']);
            break;
    }
}

// Función para activar tags específicos
function activateTags(tagsToActivate) {
    const tagFilters = document.querySelectorAll('.tag-filter');
    
    tagFilters.forEach(filter => {
        const tag = filter.getAttribute('data-tag');
        if (tagsToActivate.includes(tag)) {
            filter.classList.add('active');
        }
    });
    
    // Simular click en los tags activados para filtrar proyectos
    tagsToActivate.forEach(tagName => {
        const tagFilter = document.querySelector(`[data-tag="${tagName}"]`);
        if (tagFilter) {
            // Simular el evento de click para activar el filtro
            tagFilter.click();
        }
    });
}

// Función para inicializar las highlights clickeables del home
function initializeHomeHighlights() {
    const highlightItems = document.querySelectorAll('.highlight-item.clickable');
    console.log('Home highlights encontradas:', highlightItems.length);
    
    highlightItems.forEach(item => {
        item.addEventListener('click', function() {
            const highlightType = this.getAttribute('data-highlight');
            console.log('Click en highlight:', highlightType);
            navigateToHighlightProjects(highlightType);
        });
    });
}

// Función para navegar a proyectos según el highlight del home
function navigateToHighlightProjects(highlightType) {
    // Navegar a la página de proyectos
    navigateToPage('projects');
    
    // Actualizar estado activo en la navegación
    const navItems = document.querySelectorAll('.nav-item');
    navItems.forEach(nav => nav.classList.remove('active'));
    const projectsNav = document.querySelector('[data-page="projects"]');
    if (projectsNav) {
        projectsNav.classList.add('active');
    }
    
    // Mostrar submenu de tags
    toggleTagsSubmenu('projects');
    
    // Filtrar por tags según el highlight
    setTimeout(() => {
        filterByHighlight(highlightType);
    }, 100);
}

// Función para filtrar proyectos según el highlight del home
function filterByHighlight(highlightType) {
    const tagFilters = document.querySelectorAll('.tag-filter');
    
    // Limpiar filtros activos
    tagFilters.forEach(filter => filter.classList.remove('active'));
    
    // Activar tags según el highlight
    switch(highlightType) {
        case 'ciencia-investigacion':
            activateTags(['ciencia', 'investigación', 'iot', 'sensores']);
            break;
        case 'arte-interactivo':
            activateTags(['arte', 'interactivo', 'sonido', 'luz']);
            break;
        case 'desarrollos':
            activateTags(['desarrollos', 'investigación', 'ciencia']);
            break;
        case 'sostenibilidad':
            activateTags(['sostenibilidad', 'educación']);
            break;
    }
}


// Exportar funciones para uso global si es necesario
window.NIXPortfolio = {
    navigateToPage,
    toggleTagFilter,
    openProjectModal,
    closeModal
};
