// Traducciones
const translations = {
    es: {
        // Navegaci√≥n
        home: "home",
        projects: "proyectos",
        contact: "contacto",
        about: "about",
        services: "servicios",
        language: "idioma",
        
        // Home
        title: "Desarrollador Tecnol√≥gico & Artista",
        subtitle: "Creo experiencias interactivas que conectan lo digital con lo f√≠sico",
        description: "Mi trabajo explora la intersecci√≥n entre tecnolog√≠a, arte y educaci√≥n, desarrollando soluciones innovadoras que transforman la forma en que interactuamos con nuestro entorno.",
        
        // Secciones home
        whatIDo: "¬øqu√© hago?",
        whatIDoText: "Desarrollo hardware y software personalizado, creo tecnolog√≠as conviviales y sistemas interactivos. Me especializo en formaciones, digitalizaci√≥n de procesos, adquisici√≥n y an√°lisis de datos, interfaces humano-m√°quina, automatizaci√≥n, prototipado r√°pido, integraci√≥n de sensores y actuadores, y soluciones creativas para artistas y educadores.",
        whoIAm: "¬øqui√©n soy?",
        whoIAmText: "Utilizo sensores, microcontroladores y algoritmos para desarrollar sistemas que dialogan con su entorno y con las personas que los habitan. Mi enfoque siempre busca hacer visible lo invisible, ya sea a trav√©s de datos ambientales, procesos biol√≥gicos o comportamientos emergentes en sistemas complejos.",
        recentProjects: "proyectos recientes",
        seeAllProjects: "Ver Todos los Proyectos",
        knowMyServices: "Conocer Mis Servicios",
        
        // P√°ginas
        projectsTitle: "Proyectos",
        projectsIntro: "Desarrollos de software y hardware personalizado. Sensores, adquisici√≥n de datos, digitalizaci√≥n. Traducciones anal√≥gico-digital / digital-anal√≥gico. Interfaces humano - m√°quina. Tecnolog√≠as conviviales, open-source, open-hard.",
        servicesTitle: "Servicios",
        servicesIntro: "Ofrezco servicios especializados en el desarrollo de soluciones tecnol√≥gicas personalizadas, integrando hardware y software para crear experiencias √∫nicas y sistemas funcionales.",
        contactTitle: "Contacto",
        aboutTitle: "About",
        
        // Servicios
        scienceResearch: "Ciencia & Investigaci√≥n",
        scienceResearchText: "Prototipos y sistemas experimentales con sensores personalizados, adquisici√≥n de datos y conectividad para investigaci√≥n cient√≠fica.",
        digitalArt: "Arte Digital e Interactivo",
        digitalArtText: "Desarrollo de soluciones tecnol√≥gicas personalizadas para artistas que quieren incorporar elementos interactivos, sensores o sistemas de control en sus obras.",
        developments: "Desarrollos",
        developmentsText: "Desarrollos art√≠sticos que combinan tecnolog√≠a, sensores y actuadores con una mirada est√©tica y aportes creativos. Desarrollo de soluciones para artistas que quieran encargar una parte de alguna pieza o el montaje/ etc soluciones creativas para artistas que quieren incorporar algo tecnol√≥gico en su obra. Tambi√©n tengo experiencia en montaje.",
        sustainability: "Sostenibilidad y Educaci√≥n",
        sustainabilityText: "Sistemas educativos interactivos y herramientas de monitoreo ambiental. Desarrollo de experiencias de aprendizaje que conectan tecnolog√≠a con conciencia ecol√≥gica.",
        
        // Tags
        filterByTags: "Filtrar por tags",
        
        // Contacto
        email: "Email",
        portfolioArt: "Portfolio Arte",
        name: "Nombre",
        message: "Mensaje",
        send: "Enviar"
    },
    en: {
        // Navegaci√≥n
        home: "home",
        projects: "projects",
        contact: "contact",
        about: "about",
        services: "services",
        language: "language",
        
        // Home
        title: "Technological Developer & Artist",
        subtitle: "I create interactive experiences that connect digital with physical",
        description: "My work explores the intersection between technology, art and education, developing innovative solutions that transform how we interact with our environment.",
        
        // Secciones home
        whatIDo: "what do i do?",
        whatIDoText: "I develop custom hardware and software, create convivial technologies and interactive systems. I specialize in training, process digitization, data acquisition and analysis, human-machine interfaces, automation, rapid prototyping, sensor and actuator integration, and creative solutions for artists and educators.",
        whoIAm: "who am i?",
        whoIAmText: "I use sensors, microcontrollers and algorithms to develop systems that dialogue with their environment and with the people who inhabit them. My approach always seeks to make the invisible visible, whether through environmental data, biological processes or emergent behaviors in complex systems.",
        recentProjects: "recent projects",
        seeAllProjects: "See All Projects",
        knowMyServices: "Know My Services",
        
        // P√°ginas
        projectsTitle: "Projects",
        projectsIntro: "Custom software and hardware development. Sensors, data acquisition, digitization. Analog-digital / digital-analog translations. Human-machine interfaces. Convivial technologies, open-source, open-hardware.",
        servicesTitle: "Services",
        servicesIntro: "I offer specialized services in the development of customized technological solutions, integrating hardware and software to create unique experiences and functional systems.",
        contactTitle: "Contact",
        aboutTitle: "About",
        
        // Servicios
        scienceResearch: "Science & Research",
        scienceResearchText: "Prototypes and experimental systems with custom sensors, data acquisition and connectivity for scientific research.",
        digitalArt: "Digital & Interactive Art",
        digitalArtText: "Development of customized technological solutions for artists who want to incorporate interactive elements, sensors or control systems in their works.",
        developments: "Developments",
        developmentsText: "Artistic developments that combine technology, sensors and actuators with an aesthetic vision and creative contributions. Development of solutions for artists who want to commission a part of a piece or the assembly/ etc creative solutions for artists who want to incorporate something technological in their work. I also have experience in assembly.",
        sustainability: "Sustainability & Education",
        sustainabilityText: "Interactive educational systems and environmental monitoring tools. Development of learning experiences that connect technology with ecological awareness.",
        
        // Tags
        filterByTags: "Filter by tags",
        
        // Contacto
        email: "Email",
        portfolioArt: "Art Portfolio",
        name: "Name",
        message: "Message",
        send: "Send"
    },
    fr: {
        // Navegaci√≥n
        home: "accueil",
        projects: "projets",
        contact: "contact",
        about: "√† propos",
        services: "services",
        language: "langue",
        
        // Home
        title: "D√©veloppeur Technologique & Artiste",
        subtitle: "Je cr√©e des exp√©riences interactives qui connectent le num√©rique au physique",
        description: "Mon travail explore l'intersection entre technologie, art et √©ducation, d√©veloppant des solutions innovantes qui transforment la fa√ßon dont nous interagissons avec notre environnement.",
        
        // Secciones home
        whatIDo: "que fais-je ?",
        whatIDoText: "Je d√©veloppe du mat√©riel et des logiciels personnalis√©s, cr√©e des technologies conviviales et des syst√®mes interactifs. Je me sp√©cialise dans la formation, la num√©risation de processus, l'acquisition et l'analyse de donn√©es, les interfaces homme-machine, l'automatisation, le prototypage rapide, l'int√©gration de capteurs et d'actionneurs, et des solutions cr√©atives pour les artistes et les √©ducateurs.",
        whoIAm: "qui suis-je ?",
        whoIAmText: "J'utilise des capteurs, des microcontr√¥leurs et des algorithmes pour d√©velopper des syst√®mes qui dialoguent avec leur environnement et avec les personnes qui les habitent. Mon approche cherche toujours √† rendre visible l'invisible, que ce soit √† travers des donn√©es environnementales, des processus biologiques ou des comportements √©mergents dans des syst√®mes complexes.",
        recentProjects: "projets r√©cents",
        seeAllProjects: "Voir Tous les Projets",
        knowMyServices: "Conna√Ætre Mes Services",
        
        // P√°ginas
        projectsTitle: "Projets",
        projectsIntro: "D√©veloppement de logiciels et mat√©riels personnalis√©s. Capteurs, acquisition de donn√©es, num√©risation. Traductions analogique-num√©rique / num√©rique-analogique. Interfaces homme-machine. Technologies conviviales, open-source, open-hardware.",
        servicesTitle: "Services",
        servicesIntro: "J'offre des services sp√©cialis√©s dans le d√©veloppement de solutions technologiques personnalis√©es, int√©grant mat√©riel et logiciel pour cr√©er des exp√©riences uniques et des syst√®mes fonctionnels.",
        contactTitle: "Contact",
        aboutTitle: "√Ä Propos",
        
        // Servicios
        scienceResearch: "Science & Recherche",
        scienceResearchText: "Prototypes et syst√®mes exp√©rimentaux avec des capteurs personnalis√©s, acquisition de donn√©es et connectivit√© pour la recherche scientifique.",
        digitalArt: "Art Num√©rique & Interactif",
        digitalArtText: "D√©veloppement de solutions technologiques personnalis√©es pour les artistes qui veulent incorporer des √©l√©ments interactifs, des capteurs ou des syst√®mes de contr√¥le dans leurs ≈ìuvres.",
        developments: "D√©veloppements",
        developmentsText: "D√©veloppements artistiques qui combinent technologie, capteurs et actionneurs avec une vision esth√©tique et des contributions cr√©atives. D√©veloppement de solutions pour les artistes qui veulent commander une partie d'une pi√®ce ou l'assemblage/ etc solutions cr√©atives pour les artistes qui veulent incorporer quelque chose de technologique dans leur travail. J'ai aussi de l'exp√©rience en assemblage.",
        sustainability: "Durabilit√© & √âducation",
        sustainabilityText: "Syst√®mes √©ducatifs interactifs et outils de surveillance environnementale. D√©veloppement d'exp√©riences d'apprentissage qui connectent la technologie avec la conscience √©cologique.",
        
        // Tags
        filterByTags: "Filtrer par tags",
        
        // Contacto
        email: "Email",
        portfolioArt: "Portfolio d'Art",
        name: "Nom",
        message: "Message",
        send: "Envoyer"
    }
};

// Idioma actual
let currentLanguage = 'es';

// Ruta base para las im√°genes
const IMG_BASE = 'images/';

// Proyectos NIX (curados + actualizados)
const projects = [
    {
        id: 16,
        title: "GAD",
        description: "Sistema IoT para monitoreo y control inteligente de tanques de agua.",
        image: IMG_BASE + "GADMain.jpeg",
        tags: ["ciencia", "iot", "sostenibilidad","desarrollos"],
        details:
            "GAD es un sistema de gesti√≥n de agua que combina sensores de ultrasonido y caudal√≠metros para medir nivel y consumo en tanques dom√©sticos o de edificios. Los datos se env√≠an a una plataforma central en l√≠nea, desde la que se puede controlar de forma remota la apertura y cierre de la electrov√°lvula de carga. Esto permite optimizar el uso del recurso, prevenir desabastecimientos y responder r√°pidamente a fugas o consumos inusuales. El dise√±o incluye m√≥dulos aut√≥nomos basados en ESP32 que se acoplan directamente a los tanques, con electr√≥nica protegida y comunicaci√≥n estable para contextos urbanos o zonas con escasez h√≠drica.",
        specs: [
            "MCU: ESP32 con conectividad WiFi",
            "Sensores: ultrasonido para nivel y caudal√≠metros para consumo",
            "Actuadores: electrov√°lvula para carga controlada",
            "Plataforma: gesti√≥n remota online basada en Firebase",
            "Aplicaci√≥n: optimizaci√≥n y control inteligente del agua"
        ],
        date: "2025-01-10"
    },
    {
        id: 15,
        title: "Flapp",
        description: "Plataforma BLE + app m√≥vil para registrar par√°metros del agua en laboratorio.",
        image: IMG_BASE + "FlappMain.jpg",
        tags: ["ciencia", "iot","investigaci√≥n","sostenibilidad","desarrollos"],
        details:
            "Sistema modular y low-cost de adquisici√≥n para ensayos con membranas (√≥smosis inversa/directa) u otros procesos f√≠sico-qu√≠micos. ESP32 alimentado por bater√≠a con sens√≥rica intercambiable. App Flutter (Android/iOS) para visualizar tiempo real, registrar y exportar datos.",
        specs: [
            "MCU: ESP32",
            "App: Flutter (BT Low Energy)",
            "Sensores: pH, EC, ORP, presi√≥n, peso",
            "Exportaci√≥n: .csv",
            "Uso: laboratorio/field portable"
        ],
        date: "2025-02-01"
    },
    {
        id: 19,
        title: "LIFE",
        description: "Monitoreo industrial para aguas grises con PLC Opta y reportes diarios online.",
        image: IMG_BASE + "LIFEMain.jpg",
        tags: ["ciencia", "iot","investigaci√≥n","sostenibilidad","desarrollos"],
        details:
            "Implementaci√≥n para el proyecto europeo LIFE BIODAPH2O: dise√±o y despliegue de un sistema robusto de adquisici√≥n y env√≠o de datos en infraestructura real de aguas grises. Conexi√≥n de >10 sensores (pH, OD, temp., turbidez, conductividad, caudal) a un PLC Arduino Opta + expansi√≥n. Registros en tiempo real y env√≠o de reportes .csv diarios a los equipos de investigaci√≥n; comunicaci√≥n por WiFi/4G y  MQTT para integraci√≥n remota. Cableado y puesta en marcha con criterios industriales (bajo mantenimiento/alta disponibilidad).",
        specs: [
            "PLC: Arduino Opta + expansi√≥n",
            "Entradas: 4‚Äì20 mA / 0‚Äì10 V",
            "Sensores: pH, OD, turbidez, EC, caudal, temp.",
            "Comms: WiFi 4G, MQTT",
            "Automatizaci√≥n: reportes .csv diarios"
        ],
        date: "2025-03-15"
    },
    {
        id: 1,
        title: "Cerbero",
        description: "Ser h√≠brido de ca√±as, luz, sonido y sensores que reacciona a rayos c√≥smicos (muones).",
        image: IMG_BASE + "cerberoMain.JPG",
        tags: ["arte", "ciencia"],
        details:
            "Instalaci√≥n interactiva que reimagina al guardi√°n del inframundo como criatura tecno-org√°nica. Un sensor de rayos c√≥smicos activa sonido, vibraci√≥n e iluminaci√≥n LED en una estructura de materiales naturales. Aborda el ‚Äòsubsuelo‚Äô como mito, territorio y psique: lo que late bajo la superficie y lo invisible que nos atraviesa.",
        specs: [
            "Sensor: detecci√≥n de muones DIY ('Cosmic Watch, MIT')",
            "Actuaci√≥n: transductores + altavoces",
            "Iluminaci√≥n: LED integrada",
            "Control: Arduino/microcontroladores",
            "Estructura: ca√±as + arena"
        ],
        date: "2024-02-01"
    },
    {
        id: 14,
        title: "Faktor",
        description: "Bomba de fluido fluorescente sincronizada con video.",
        image: IMG_BASE + "FaktorMain.jpg",
        tags: ["arte", "desarrollos","video"],
        details:
            "Instalaci√≥n desarrollada para 'Cuando dejamos de entender el mundo' (Faktor, Mil√°n). Circuito de mangueras con l√≠quido fluorescente cuyo flujo se sincroniza con una pieza de video. Control integral desde Raspberry Pi con scripts para timing, autonom√≠a y robustez in-situ.",
        specs: [
            "Control: Raspberry Pi (Python/Shell)",
            "Actuaci√≥n: bomba perist√°ltica + v√°lvulas",
            "Sincron√≠a: OSC/tiempos programados",
            "Iluminaci√≥n: LEDs UV",
            "Montaje: metacrilato + aluminio"
        ],
        date: "2023-10-01"
    },
    {
        id: 17,
        title: "Gino Rubert",
        description: "Cuadros con radar Doppler: la presencia revela im√°genes ocultas por luz interna.",
        image: IMG_BASE + "GinoMain.jpg",
        tags: ["arte", "desarrollos","luz","sonido"],
        details:
            "Desarrollo de electr√≥nica embebida en marcos: sensores Doppler detectan presencia y disparan un sistema de LED con fade in/out que muestra una capa pict√≥rica oculta. Proyecto expuesto en distintos espacios (p.ej., Tecla Sala, 2023) y en evoluci√≥n t√©cnica continua.",
        specs: [
            "Sensado: radar Doppler de presencia",
            "Iluminaci√≥n: LED de alto CRI",
            "Control: placas a medida (Arduino)",
            "Alimentaci√≥n: 12 V discreta",
            "Integraci√≥n: bastidor/marco"
        ],
        date: "2023-10-01"
    },
    {
        id: 20,
        title: "Multiverso",
        description: "Mural que se ‚Äúpinta con luz‚Äù: encendido aut√≥nomo por horarios y coreograf√≠a lum√≠nica.",
        image: IMG_BASE + "multiversoMain.jpg",
        tags: ["arte", "luz"],
        details:
            "Instalaci√≥n lum√≠nica aut√≥noma en espacio p√∫blico/comunitario. Secuencias programadas activan sectores del mural en franjas horarias, generando capas visuales din√°micas sin intervenci√≥n humana. Bater√≠a recargable, f√°cil mantenimiento y ajuste de comportamiento por calendario.",
        specs: [
            "Controlador programable (MCU)",
            "Coreograf√≠as LED",
            "Temporizaci√≥n horaria",
            "Alimentaci√≥n: bater√≠a recargable",
            "Modo: aut√≥nomo/port√°til"
        ],
        date: "2023-05-01"
    },
    {
        id: 2,
        title: "Biota",
        description: "Estructura reticular sensible: movimiento del p√∫blico activa paisajes sonoros.",
        image: IMG_BASE + "biotaMain.jpg",
        tags: ["arte", "investigaci√≥n","sonido","luz","educaci√≥n"],
        details:
            "Instalaci√≥n multimedia surgida del programa Bolit Mentor (secundaria de Girona). Integra composiciones de estudiantes activadas por PIR. El audio suena por altavoces y transductores en la estructura, permitiendo percibir la obra por tacto y ampliando la accesibilidad.",
        specs: [
            "MCU: Arduino",
            "Audio: altavoces + transductores",
            "Sensores: PIR + ambiente",
            "Luz: pixel LED",
            "Software: playback/s√≠ntesis"
        ],
        date: "2023-11-30"
    },
    /*{
      id: 14_2,
      title: "Relics",
      description: "Esculturas cer√°micas t√°ctiles como instrumentos MIDI; interfaz sensible y compacta.",
      image: IMG_BASE + "relicsMain.jpg",
      tags: ["arte", "performance"],
      details:
        "Colaboraci√≥n con Dania Shihab (S√≥nar 2025): cer√°micas dise√±adas en 3D con discos de cobre y 12 sensores capacitivos MPR121 por pieza. Arduino Micro act√∫a como interfaz MIDI-USB; cada contacto dispara eventos/gestos sonoros en tiempo real. Optimizado para fiabilidad t√°ctil y montaje esc√©nico.",
      specs: [
        "Interfaz: Arduino Micro (MIDI-USB)",
        "Sensores: MPR121 capacitivos",
        "Electrodos: cobre integrado en cer√°mica",
        "Soft: entorno/DAW tiempo real",
        "Dise√±o: modular y escalable"
      ],
      date: "2025-06-01"
    },*/
    {
        id: 22,
        title: "Playing God",
        description: "Biointerfaz planta‚Äìm√°quina: sensores traducen respuestas vegetales a sonido.",
        image: IMG_BASE + "playingGodMain.jpg",
        tags: ["arte", "ciencia","investigaci√≥n"],
        details:
            "Investigaci√≥n art√≠stica financiada por OSIC que explora sensibilidad vegetal. Tres dispositivos: (1) sensor suelo/ambiente (pH, EC, NPK, temp., luz, presencia), (2) sensor galv√°nico en hojas para micro-variaciones el√©ctricas, (3) m√≥dulo ambiental de aire (O‚ÇÇ/CO‚ÇÇ). Traducci√≥n sonora (Max/MSP) y registro de reacciones.",
        specs: [
            "Sensores: pH, EC, NPK, temp., luz, presencia",
            "Electrodos: pads galv√°nicos",
            "Soft: Max/MSP",
            "Energ√≠a: panel solar + bater√≠a",
            "Datos: logging/visualizaci√≥n"
        ],
        date: "2022-09-15"
    },
    {
        id: 18,
        title: "Kit Ambiental",
        description: "Kit modular open-source: sensores para campo educativo/ciencia ciudadana.",
        image: IMG_BASE + "kitAmbientalMain.jpg",
        tags: ["ciencia", "educaci√≥n","sostenibilidad","desarrollos"],
        details:
            "Plataforma DIY para observaci√≥n y registro en exterior: carcasa 3D resistente a intemperie, alimentaci√≥n solar/bater√≠a y sensores intercambiables (agua/aire/suelo). Registro local (SD) o env√≠o BLE/WiFi. Pensado para talleres y trabajo comunitario.",
        specs: [
            "MCU: ESP32",
            "Almacenamiento: microSD",
            "Conectividad: BLE/WiFi",
            "Sensores: DHT22, MQ, TDS, turbidez, etc.",
            "Alimentaci√≥n: solar o bater√≠a"
        ],
        date: "2024-07-01"
    },
    {
        id: 10,
        title: "DeCent",
        description: "M√≥dulo aut√≥nomo para saneamiento/monitoreo de aire. Conjunto de sensores y actuadores conectados v√≠a bluetooth a una interfaz gr√°fica que permite visualizar y guardar datos para investigaci√≥n cient√≠fica.",
        image: IMG_BASE + "decentMain.jpg",
        tags: ["ciencia", "sostenibilidad","investigaci√≥n","desarrollos"],
        details:
            "Instalaci√≥n experimental (decentralized + sensing + sanitation) para contextos rurales/itinerantes. Sensado de gases (metano/CO‚ÇÇ), humedad y temperatura de aire/suelo, logging en SD y operaci√≥n aut√≥noma con energ√≠a solar. Plataforma para pr√°cticas eco-tecnol√≥gicas.",
        specs: [
            "MCU: ESP32",
            "Sensores: CH‚ÇÑ (100%), CO‚ÇÇ (100%), O2, H2, pH",
            "Actuadores: 5 x Bombas Perist√°lticas",
            "Registro: microSD",
            "Energ√≠a: multivoltaje DC",
            "Formato: caja modular transportable"
        ],
        date: "2023-01-01"
    },
    {
        id: 3,
        title: "a-sync",
        description: "Polifon√≠a desincronizada: luz y sonido generan patrones fuera de fase.",
        image: IMG_BASE + "async.jpg",
        tags: ["arte", "sonido", "ciencia","luz"],
        details:
            "Instalaci√≥n de vibraci√≥n/azar: transductores convierten vidrios en membranas resonantes. Capas de audio y luz se desfasan para producir pulsos que se alinean/desalinean en el espacio.",
        specs: [
            "Audio: multicanal",
            "Control: MIDI/MaxMSP",
            "Iluminaci√≥n: Esculturas led con software personalizado",
            "Actuaci√≥n: transductores"
        ],
        date: "2023-02-15"
    },
    {
        id: 4,
        title: "silencios inquietos",
        description: "Granulado de ruido blanco espacializado que esculpe el silencio como materia.",
        image: IMG_BASE + "silenciosInquietosMain.jpg",
        tags: ["arte", "sonido"],
        details:
            "Cinco estructuras sostienen 30 parlantes controlados por algoritmo generativo. La obra desplaza la escucha hacia una experiencia activa del ‚Äòsilencio‚Äô y sugiere el espacio como narrativa sonora.",
        specs: [
            "30 parlantes + 30 rel√©s",
            "Control: Arduino",
            "Algoritmo: generativo",
            "Audio: granos de ruido blanco",
            "Site: CCK (2019)"
        ],
        date: "2021-12-15"
    },
    {
        id: 5,
        title: "habittat",
        description: "Serie generativa (2015‚Äì2018): actuadores sonoros/luz moldean la percepci√≥n del espacio.",
        image: IMG_BASE + "HabittatMain.jpg",
        tags: ["arte", "sonido"],
        details:
            "Intervenciones que sit√∫an actuadores lum√≠nicos y sonoros para componer secuencias org√°nicas mediante microcontroladores. Un recorrido que re-entiende el espacio por est√≠mulos visuales/ac√∫sticos.",
        specs: [
            "Algoritmo generativo",
            "Actuadores de luz y golpeadores",
            "Microcontroladores",
            "Formato: site-specific",
            "Periodo: 2015‚Äì2018"
        ],
        date: "2020-08-15"
    },
    {
        id: 21,
        title: "noias",
        description: "Dispositivos sonoros que detectan la cercan√≠a del o√≠do y reproducen grabaciones hechas en ese mismo punto geogr√°fico.",
        image: IMG_BASE + "noiasMain.jpg",
        tags: ["arte", "sonido","desarrollos"],
        details:
            "Dispositivos aut√≥nomos con Arduino Nano y sensor de ultrasonido que detectan la cercan√≠a del o√≠do para activar un altavoz. Cada uno reproduce un audio grabado en ese mismo lugar, conectando presencia f√≠sica, memoria y territorio a trav√©s de la escucha.",
        specs: [
            "Sensores: de cercan√≠a (ultrasonido)",
            "Actuadores: altavoces",
            "Control: Arduino Nano, activaci√≥n por cercan√≠a",
            "Ambiente: mapa de la devesa de Salt"
        ],
        date: "2022-09-01"
    },
    {
        id: 7,
        title: "micro-bio",
        description: "Sistema experimental para la captura y reducci√≥n de CO‚ÇÇ en espacios interiores.",
        image: IMG_BASE + "microBioMain.JPG",
        tags: ["ciencia","investigaci√≥n","desarrollos"],
        details:
        "Proyecto de investigaci√≥n cient√≠fica que integra sensores de CO‚ÇÇ, bombas, electrov√°lvulas y l√°minas resistivas para extraer y almacenar CO‚ÇÇ del aire interior. Registra datos en tarjeta SD y ofrece visualizaci√≥n mediante una app en Flutter, incluso en modo offline. Primera fase del proyecto Decent, con enfoque en sostenibilidad y reutilizaci√≥n de recursos.",
        specs: [
            "MCU: Arduino Mega 2560",
            "Sensores: CO‚ÇÇ industriales",
            "Actuadores: bombas de aire, electrov√°lvulas, l√°minas resistivas calefactadas",
            "Almacenamiento: tarjeta SD",
            "Conectividad: App Flutter con soporte offline",
            "Alimentaci√≥n: 12 V",
            "Sistema de captura y almacenamiento de gas"
        ],
        date: "2022-11-03"
    },
    {
        id: 6,
        title: "mutaciones",
        description: "Sistema lum√≠nico generativo: Max/MSP y Arduino Mega conmutan tubos fluorescentes mediante patrones aleatorios inspirados en el I‚ÄëChing.",
        image: IMG_BASE + "mutacionesMain.png",
        tags: ["arte","luz"],
        details:
        "Instalaci√≥n que conecta Max/MSP con una matriz de rel√©s controlada por Arduino Mega para encender y apagar tubos fluorescentes. Cada ejecuci√≥n genera combinaciones diferentes de encendidos, componiendo im√°genes lum√≠nicas siempre cambiantes. El algoritmo introduce azar y reglas simples para mutar ritmos y composiciones, evocando el I‚ÄëChing como motor de variaci√≥n.",
        specs: [
            "MCU: Arduino Mega 2560",
            "Software: Max/MSP (control y secuenciaci√≥n)",
            "Interfaz: comunicaci√≥n serial Max ‚áÑ Arduino",
            "Actuadores: caja de rel√©s + tubos fluorescentes",
            "Algoritmos: patrones aleatorios/generativos",
        ],
        date: "2022-12-15"
    },
    {
        id: 26_2,
        title: "Interferencias C√≥smicas",
        description: "Detector DIY de muones + visual/sonificaci√≥n en tiempo real (Pure Data).",
        image: IMG_BASE + "rayosCosmicosMain.jpg",
        tags: ["arte", "ciencia","investigaci√≥n"],
        details:
            "Investigaci√≥n sobre rayos c√≥smicos y su traducci√≥n sensorial. Prototipo con centelladores y adquisici√≥n de datos; los impactos se env√≠an a Pure Data para generar visuales reactivos y capas sonoras. Proyecto orientado a documentaci√≥n abierta y replicabilidad.",
        specs: [
            "Detecci√≥n: centelladores",
            "Control: Arduino Nano",
            "Visual/Sonido: Pure Data",
            "Foco: ciencia ciudadana/DIY",
            "Estado: prototipo en evoluci√≥n"
        ],
        date: "2024-09-01"
    },
    {
        id: 8,
        title: "Introducci√≥n a la programaci√≥n y la electr√≥nica",
        description: "Kit/curso progresivo para iniciar en MCU, sensores y control.",
        image: IMG_BASE + "introduccionElectronica.jpg",
        tags: ["educaci√≥n","ciencia"],
        details:
            "Dise√±o de talleres modulares (2022‚Äìactualidad) con enfoque DIY y soberan√≠a tecnol√≥gica: sensores ambientales, construcci√≥n de dispositivos interactivos y automatizaci√≥n con Arduino/ESP32. Adaptable a escuelas, universidades, festivales e instituciones.",
        specs: [
            "MCU: Arduino/ESP32",
            "Componentes: sensores/actuadores",
            "Formato: >15 pr√°cticas",
            "Software: libre",
            "Metodolog√≠a: aprendizaje colectivo"
        ],
        date: "2024-12-13"
    },
    {
        id: 11,
        title: "Erik Estany Tigerstorm",
        description: "Soporte t√©cnico/AV: adaptaci√≥n de obras, montaje, sincron√≠a de pantallas y controladores.",
        image: IMG_BASE + "ErikPantallitasMain.jpg",
        tags: ["arte", "desarrollos","video"],
        details:
            "Desarrollo/montaje para la expo ‚ÄòDel que pasa a fora‚Äô (Viphoto Fest y Sala Am√°rica): integraci√≥n de pantallas OLED/HDMI, controladores personalizados, sincronizaci√≥n y automatizaci√≥n para funcionamiento continuo.",
        specs: [
            "Control: Raspberry Pi + Arduino",
            "Displays: OLED/HDMI",
            "Integraci√≥n: interfaces a medida",
            "Sincronizaci√≥n: playback estable",
            "Servicio: montaje integral"
        ],
        date: "2022-06-01"
    },
    {
        id: 23,
        title: "Aleatoriedades",
        description: "La rama de un √°rbol atrapada en un loop constante. Land-art.",
        image: IMG_BASE + "AleatoriedadesMain.png",
        tags: ["arte", "land art"],
        details:
          "Tras una tormenta, una rama qued√≥ atrapada en un ciclo repetitivo: un extremo sujeto a piedras, el otro rebotando sobre el agua. Mi intervenci√≥n reforz√≥ su estructura y anclaje para que el movimiento persistiera, extendiendo un instante fortuito hacia una observaci√≥n prolongada.",
        specs: [
          "Ubicaci√≥n: El Volc√°n, San Luis (Argentina)",
          "Medio: land-art, intervenci√≥n site-specific",
          "Materiales: rama, piedras, cuerda/refuerzo",
          "T√©cnica: ajuste de anclaje y estructura con piedras y madera",
          "Duraci√≥n: variable, seg√∫n condiciones naturales"
        ],
        date: "2018-12-15"
    },
    {
        id: 24,
        title: "Luci√©rnagas",
        description: "Luces led con sistema y conexi√≥n personalizada crea una sinfon√≠a luminiscente que rinde tributo a las luci√©rnagas.",
        image: IMG_BASE + "luciernagasMain.png",
        tags: ["arte", "luz"],
        details:
            "Instalaci√≥n lum√≠nica compuesta por LEDs conectados a un sistema de control dise√±ado a medida. El conjunto genera pulsos y destellos que evocan el comportamiento de las luci√©rnagas, transformando el espacio en una coreograf√≠a de luz que oscila entre lo natural y lo artificial.",        
        specs: [
            "MCU: Arduino Nano",
            "Luz: LED",
            "Sensores: fotodiodos",
            "Energ√≠a: bater√≠a recargable",
            "Outdoor: IP65"
        ],
        date: "2020-07-15"
    },
    {
        id: 12,
        title: "Dispositivos Dom√≥tica Personalizados",
        description: "Sistemas a medida para control remoto de iluminaci√≥n, sonido y accesos.",
        image: IMG_BASE + "domoticaMain.jpg",
        tags: ["dom√≥tica", "desarrollos"],
        details:
          "Desarrollo de dispositivos personalizados que requer√≠a avisos sonoros programados, control de iluminaci√≥n y apertura/cierre remoto de puertas. El sistema, basado en ESP32, integra reproductor de audio DFPlayer, rel√©s y cerraduras electromagn√©ticas, operando de forma centralizada y adaptable a distintas rutinas horarias.",
        specs: [
          "MCU: ESP32",
          "Audio: DFPlayer Mini + altavoz",
          "Actuadores: rel√©s + cerraduras electromagn√©ticas",
          "Funciones: avisos sonoros programados, control de iluminaci√≥n, apertura/cierre de puertas",
          "Conectividad: WiFi"
        ],
        date: "2024-06-10"
    },
    {
        id: 13,
        title: "Todo lo que flota tiene que flotar",
        description: "Instalaci√≥n ef√≠mera de flotabilidad, equilibrio y azar en entorno natural.",
        image: IMG_BASE + "todoLoQueFlotaMain.png",
        tags: ["arte", "land art"],
        details:
            "Ensayo sobre tensi√≥n capilar, vasos comunicantes, densidad y formas inestables usando hojas, ramas, piedras, agua y objetos locales. Registro audiovisual y partitura de acciones.",
        specs: [
            "Site: Canet de Adri",
            "Materiales: org√°nicos/in situ",
            "Acci√≥n: coreograf√≠as/percusi√≥n",
            "Documento: video",
            "Formato: ef√≠mero"
        ],
        date: "2020-09-01"
    },
    {
        id: 27,
        title: "Insectodrom",
        description: "Sistema de streaming DIY para hostales de insectos con Raspberry Pi y energ√≠a solar.",
        image: IMG_BASE + "insectodromMain.png",
        tags: ["ciencia", "investigaci√≥n", "iot", "sostenibilidad", "video", "desarrollos"],
        details:
            "Desarrollo t√©cnico para el proyecto Insectodrom del centro de arte contempor√°neo BLOIT, que explora la relaci√≥n entre humanos, insectos y ciudades. Mi contribuci√≥n consisti√≥ en dise√±ar e implementar un sistema completo de streaming en vivo para hostales de insectos, utilizando Raspberry Pi con m√≥dulo de c√°mara CAPI CAM. El sistema transmite 24/7 por Twitch, mostrando la vida de los insectos en tiempo real, y est√° alimentado completamente por energ√≠a solar. Adem√°s, cre√© un video tutorial completo que explica paso a paso c√≥mo replicar este sistema low-cost y DIY para que otros puedan implementar sus propios streams de biodiversidad urbana.",
        specs: [
            "Hardware: Raspberry Pi + m√≥dulo CAPI CAM",
            "Streaming: transmisi√≥n 24/7 por Twitch",
            "Energ√≠a: sistema solar aut√≥nomo",
            "Software: programaci√≥n personalizada para streaming",
            "Documentaci√≥n: video tutorial DIY completo",
            "Aplicaci√≥n: monitoreo de biodiversidad urbana en tiempo real"
        ],
        date: "2023-04-27"
    }
];

// Variables globales
let currentPage = 'home';
let activeFilters = [];
let filteredProjects = [...projects];
// Orden inicial por fecha descendente
filteredProjects = [...projects].sort((a, b) => new Date(b.date) - new Date(a.date));

// Inicializaci√≥n cuando el DOM est√° listo
document.addEventListener('DOMContentLoaded', function () {
    initializeNavigation();
    initializeTagFilters();
    initializeModal();
    initializeContactForm();
    initializeServicesPage();
    initializeLanguageSelector(); // Llamar la nueva funci√≥n

    // Renderizado inicial con animaci√≥n
    setTimeout(() => {
        renderProjectsAnimated();
        
        // Test directo de las service cards
        const testCards = document.querySelectorAll('.service-card');
        console.log('Test directo - Service cards encontradas:', testCards.length);
        testCards.forEach(card => {
            card.addEventListener('click', function() {
                console.log('Click directo en service card!');
                const serviceType = this.getAttribute('data-service');
                if (serviceType) {
                    navigateToServiceProjects(serviceType);
                }
            });
        });
        
        // Inicializar highlights clickeables del home
        initializeHomeHighlights();
        
        // Inicializar men√∫ m√≥vil
        initializeMobileMenu();
    }, 100);
    
    // Renderizar proyectos recientes despu√©s de un poco m√°s de tiempo
    setTimeout(() => {
        console.log('Ejecutando renderRecentProjects...');
        renderRecentProjects();
    }, 300);
});

// Navegaci√≥n entre p√°ginas
function initializeNavigation() {
    const navItems = document.querySelectorAll('.nav-item');

    navItems.forEach(item => {
        item.addEventListener('click', function (e) {
            e.preventDefault();
            const targetPage = this.getAttribute('data-page');
            navigateToPage(targetPage);

            // Actualizar estado activo
            navItems.forEach(nav => nav.classList.remove('active'));
            this.classList.add('active');

            // Mostrar/ocultar submenu de tags
            toggleTagsSubmenu(targetPage);
        });
    });

    // Inicializar botones CTA del home
    initializeCTAButtons();
}

// Funci√≥n para inicializar botones CTA del home
function initializeCTAButtons() {
    const ctaButtons = document.querySelectorAll('.cta-button');
    
    console.log('üîç Inicializando botones CTA...');
    console.log('üîò Botones CTA encontrados:', ctaButtons.length);
    console.log('üîò Botones:', ctaButtons);
    
    if (ctaButtons.length === 0) {
        console.log('‚ùå ERROR: No se encontraron botones CTA');
        return;
    }
    
    ctaButtons.forEach((button, index) => {
        const targetPage = button.getAttribute('data-page');
        console.log(`üîò Bot√≥n ${index + 1}:`, { button, targetPage, text: button.textContent });
        
        button.addEventListener('click', function (e) {
            e.preventDefault();
            e.stopPropagation();
            
            const targetPage = this.getAttribute('data-page');
            console.log('üñ±Ô∏è Click en CTA button:', targetPage);
            console.log('üîò Bot√≥n clickeado:', this);
            
            // Navegar a la p√°gina
            console.log('üß≠ Navegando a p√°gina:', targetPage);
            navigateToPage(targetPage);
            
            // Actualizar estado activo en la navegaci√≥n del sidebar
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(nav => nav.classList.remove('active'));
            const targetNav = document.querySelector(`[data-page="${targetPage}"]`);
            if (targetNav) {
                targetNav.classList.add('active');
                console.log('‚úÖ Navegaci√≥n activa actualizada');
            } else {
                console.log('‚ùå No se encontr√≥ nav-item para:', targetPage);
            }
            
            // Mostrar/ocultar submenu de tags si es necesario
            toggleTagsSubmenu(targetPage);
        });
        
        console.log(`‚úÖ Event listener agregado al bot√≥n ${index + 1}`);
    });
}

// Funci√≥n para mostrar/ocultar submenu de tags
function toggleTagsSubmenu(page) {
    const tagsSubmenu = document.getElementById('tags-submenu');
    if (tagsSubmenu) {
        if (page === 'projects') {
            tagsSubmenu.style.display = 'block';
        } else {
            tagsSubmenu.style.display = 'none';
        }
    }
}

// Funci√≥n para cambiar idioma
function changeLanguage(lang) {
    currentLanguage = lang;
    
    // Actualizar botones de idioma
    document.querySelectorAll('.language-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    document.querySelector(`[data-lang="${lang}"]`).classList.add('active');
    
    // Aplicar traducciones
    applyTranslations();
}

// Funci√≥n para aplicar traducciones
function applyTranslations() {
    const t = translations[currentLanguage];
    
    // Navegaci√≥n
    document.querySelectorAll('[data-page="home"]').forEach(el => el.textContent = t.home);
    document.querySelectorAll('[data-page="projects"]').forEach(el => el.textContent = t.projects);
    document.querySelectorAll('[data-page="contact"]').forEach(el => el.textContent = t.contact);
    document.querySelectorAll('[data-page="about"]').forEach(el => el.textContent = t.about);
    document.querySelectorAll('[data-page="services"]').forEach(el => el.textContent = t.services);
    
    // Home
    document.querySelector('.home-text h2').textContent = t.title;
    document.querySelector('.home-description').textContent = t.description;
    document.querySelector('.home-what-i-do h3').textContent = t.whatIDo;
    document.querySelector('.home-what-i-do p').textContent = t.whatIDoText;
    document.querySelector('.recent-projects h3').textContent = t.recentProjects;
    document.querySelector('[data-page="projects"]').textContent = t.seeAllProjects;
    document.querySelector('[data-page="services"]').textContent = t.knowMyServices;
    
    // P√°ginas
    document.querySelector('#projects-page h1').textContent = t.projectsTitle;
    document.querySelector('#projects-page .intro p').textContent = t.projectsIntro;
    document.querySelector('#services-page h1').textContent = t.servicesTitle;
    document.querySelector('#services-page .services-intro p').textContent = t.servicesIntro;
    document.querySelector('#contact-page h1').textContent = t.contactTitle;
    document.querySelector('#about-page h1').textContent = t.aboutTitle;
    
    // Servicios
    document.querySelector('.service-card:nth-child(1) h3').textContent = t.scienceResearch;
    document.querySelector('.service-card:nth-child(1) p').textContent = t.scienceResearchText;
    document.querySelector('.service-card:nth-child(2) h3').textContent = t.digitalArt;
    document.querySelector('.service-card:nth-child(2) p').textContent = t.digitalArtText;
    document.querySelector('.service-card:nth-child(3) h3').textContent = t.developments;
    document.querySelector('.service-card:nth-child(3) p').textContent = t.developmentsText;
    document.querySelector('.service-card:nth-child(4) h3').textContent = t.sustainability;
    document.querySelector('.service-card:nth-child(4) p').textContent = t.sustainabilityText;
    
    // Tags
    document.querySelector('.tags-submenu h3').textContent = t.filterByTags;
    
    // Contacto
    document.querySelector('.contact-info strong:first-of-type').textContent = t.email + ':';
    document.querySelector('.contact-info strong:last-of-type').textContent = t.portfolioArt + ':';
    document.querySelector('label[for="name"]').textContent = t.name;
    document.querySelector('label[for="message"]').textContent = t.message;
    document.querySelector('button[type="submit"]').textContent = t.send;
}

function navigateToPage(page) {
    // Ocultar todas las p√°ginas
    const pages = document.querySelectorAll('.page');
    pages.forEach(p => p.classList.add('hidden'));

    // Mostrar la p√°gina seleccionada
    const targetPage = document.getElementById(`${page}-page`);
    if (targetPage) {
        targetPage.classList.remove('hidden');
        currentPage = page;
        
        // Scroll al inicio de la p√°gina
        window.scrollTo({
            top: 0,
            left: 0,
            behavior: 'smooth'
        });
        
        // Reinicializar men√∫ m√≥vil para la nueva p√°gina
        setTimeout(() => {
            initializeMobileMenu();
        }, 100);
    }
}

// Sistema de filtros por tags
function initializeTagFilters() {
    const tagButtons = document.querySelectorAll('.tag-filter');

    tagButtons.forEach(button => {
        button.addEventListener('click', function () {
            const tag = this.getAttribute('data-tag');
            toggleTagFilter(tag, this);
        });
    });
}

function toggleTagFilter(tag, buttonElement) {
    const index = activeFilters.indexOf(tag);

    if (index > -1) {
        // Remover filtro
        activeFilters.splice(index, 1);
        buttonElement.classList.remove('active');
    } else {
        // Agregar filtro
        activeFilters.push(tag);
        buttonElement.classList.add('active');
    }

    filterProjects();
}

function filterProjects() {
    // Primero, animar la salida de los elementos actuales
    const currentCards = document.querySelectorAll('.project-card');

    // Agregar clase de fade-out a todos los elementos actuales
    currentCards.forEach((card, index) => {
        setTimeout(() => {
            card.classList.add('fade-out');
        }, index * 50); // Retraso escalonado
    });

    // Despu√©s de que termine la animaci√≥n de salida, filtrar y mostrar nuevos elementos
    setTimeout(() => {
        if (activeFilters.length === 0) {
            // Sin filtros ‚Üí mostrar todos los proyectos ordenados por fecha descendente
            filteredProjects = [...projects].sort((a, b) => new Date(b.date) - new Date(a.date));
        } else {
            // Filtrar y ordenar por fecha descendente
            filteredProjects = projects
                .filter(project => project.tags.some(tag => activeFilters.includes(tag)))
                .sort((a, b) => new Date(b.date) - new Date(a.date));
        }

        renderProjectsAnimated();
    }, currentCards.length * 50 + 200); // Esperar a que termine la animaci√≥n de salida
}

// Renderizado de proyectos (versi√≥n inicial sin animaciones)
function renderProjects() {
    const container = document.getElementById('projects-container');

    if (filteredProjects.length === 0) {
        container.innerHTML = '<p style="text-align: center; color: #666;">No hay proyectos que coincidan con los filtros seleccionados.</p>';
        return;
    }

    container.innerHTML = filteredProjects
        .map(
            project => `
          <div class="project-card" data-project-id="${project.id}">
            <div class="project-image">
              <img src="${project.image}" alt="${project.title}" loading="lazy">
            </div>
            <h3 class="project-title">${project.title}</h3>
            <p class="project-description">${project.description}</p>
            <div class="project-tags">
              ${project.tags.map(tag => `<span class="project-tag">${tag}</span>`).join('')}
            </div>
          </div>
        `
        )
        .join('');

    addProjectCardListeners();
}

// Renderizado animado de proyectos
function renderProjectsAnimated() {
    const container = document.getElementById('projects-container');

    if (filteredProjects.length === 0) {
        container.innerHTML = '<p style="text-align: center; color: #666; opacity: 0;" class="no-projects">No hay proyectos que coincidan con los filtros seleccionados.</p>';
        // Animar la entrada del mensaje
        setTimeout(() => {
            const message = container.querySelector('.no-projects');
            if (message) {
                message.style.transition = 'opacity 0.5s ease';
                message.style.opacity = '1';
            }
        }, 100);
        return;
    }

    // Crear elementos con opacidad 0 para animaci√≥n de entrada
    container.innerHTML = filteredProjects
        .map(
            project => `
          <div class="project-card" data-project-id="${project.id}" style="opacity: 0; transform: scale(0.8) translateY(30px);">
            <div class="project-image">
              <img src="${project.image}" alt="${project.title}" loading="lazy">
            </div>
            <h3 class="project-title">${project.title}</h3>
            <p class="project-description">${project.description}</p>
            <div class="project-tags">
              ${project.tags.map(tag => `<span class="project-tag">${tag}</span>`).join('')}
            </div>
          </div>
        `
        )
        .join('');

    // Animar la entrada de cada card con retraso escalonado
    const newCards = container.querySelectorAll('.project-card');
    newCards.forEach((card, index) => {
        setTimeout(() => {
            card.style.transition = 'all 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
            card.style.opacity = '1';
            card.style.transform = 'scale(1) translateY(0) rotate(0deg)';

            // Agregar una peque√±a rotaci√≥n aleatoria durante la animaci√≥n para m√°s organicidad
            const randomRotation = (Math.random() - 0.5) * 2; // Entre -1 y 1 grado
            card.style.transform = `scale(1) translateY(0) rotate(${randomRotation}deg)`;

            setTimeout(() => {
                card.style.transform = 'scale(1) translateY(0) rotate(0deg)';
            }, 300);
        }, index * 100 + 50); // Retraso escalonado para entrada org√°nica
    });

    addProjectCardListeners();
}

// Funci√≥n auxiliar para agregar event listeners a las cards
function addProjectCardListeners() {
    const projectCards = document.querySelectorAll('.project-card');
    projectCards.forEach(card => {
        card.addEventListener('click', function () {
            const projectId = parseInt(this.getAttribute('data-project-id'));
            openProjectModal(projectId);
        });
    });
}

// Sistema de modal para proyectos expandidos
function initializeModal() {
    const modal = document.getElementById('project-modal');
    const closeButton = document.querySelector('.close-modal');

    if (closeButton) {
        closeButton.addEventListener('click', closeModal);
    }

    if (modal) {
        modal.addEventListener('click', function (e) {
            if (e.target === modal) {
                closeModal();
            }
        });
    }

    // Cerrar modal con ESC
    document.addEventListener('keydown', function (e) {
        const m = document.getElementById('project-modal');
        if (e.key === 'Escape' && m && !m.classList.contains('hidden')) {
            closeModal();
        }
    });
}

function openProjectModal(projectId) {
    const project = projects.find(p => p.id === projectId);
    if (!project) return;

    const modalBody = document.getElementById('modal-body');
    if (modalBody) {
        modalBody.innerHTML = `
        <div class="modal-project-content">
          <h2>${project.title}</h2>
          <div class="project-image">
            <img src="${project.image}" alt="${project.title}">
          </div>
          <div class="project-details">
            ${project.details}
          </div>
          <div class="project-specs">
            <h3>Especificaciones T√©cnicas:</h3>
            <ul>
              ${project.specs.map(spec => `<li>‚Ä¢ ${spec}</li>`).join('')}
            </ul>
          </div>
          <div class="project-tags">
            ${project.tags.map(tag => `<span class="project-tag">${tag}</span>`).join('')}
          </div>
        </div>
      `;
    }

    const modal = document.getElementById('project-modal');
    if (modal) {
        modal.classList.remove('hidden');
    }
    document.body.style.overflow = 'hidden'; // Prevenir scroll del body
}

function closeModal() {
    const modal = document.getElementById('project-modal');
    if (modal) {
        modal.classList.add('hidden');
    }
    document.body.style.overflow = 'auto'; // Restaurar scroll del body
}

// Formulario de contacto
function initializeContactForm() {
    const form = document.querySelector('.contact-form');
    if (!form) return;

    form.addEventListener('submit', function (e) {
        e.preventDefault();

        const formData = new FormData(form);
        const data = {
            name: formData.get('name'),
            email: formData.get('email'),
            message: formData.get('message')
        };

        // Simular env√≠o del formulario
        console.log('Datos del formulario:', data);

        // Mostrar mensaje de confirmaci√≥n
        alert('¬°Gracias por tu mensaje! Te contactar√© pronto.');

        // Limpiar formulario
        form.reset();
    });
}

// Funciones utilitarias
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

// Responsive: manejo del men√∫ en m√≥vil - VERSI√ìN B√ÅSICA
function initializeMobileMenu() {
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const sidebar = document.querySelector('.sidebar');
    
    if (mobileMenuBtn && sidebar) {
        mobileMenuBtn.addEventListener('click', function() {
            sidebar.classList.toggle('open');
        });
    }
}


// Funci√≥n para renderizar proyectos recientes en el home
function renderRecentProjects() {
    const recentContainer = document.getElementById('recent-projects-container');
    console.log('Buscando contenedor de proyectos recientes:', recentContainer);
    if (!recentContainer) {
        console.log('No se encontr√≥ el contenedor de proyectos recientes');
        return;
    }

    console.log('Total de proyectos disponibles:', projects.length);
    console.log('Proyectos:', projects);

    // Obtener los 3 √∫ltimos proyectos (ordenados por fecha)
    let recentProjects;
    try {
        recentProjects = [...projects]
            .sort((a, b) => new Date(b.date) - new Date(a.date))
            .slice(0, 3);
    } catch (error) {
        console.log('Error ordenando por fecha, tomando primeros 3 proyectos:', error);
        recentProjects = projects.slice(0, 3);
    }

    console.log('Proyectos recientes seleccionados:', recentProjects);
    if (recentProjects.length === 0) {
        console.log('No hay proyectos recientes');
        return;
    }

    recentContainer.innerHTML = recentProjects
        .map(project => `
            <div class="project-card recent" data-project-id="${project.id}">
                <div class="project-image">
                    <img src="${project.image}" alt="${project.title}" loading="lazy">
                </div>
                <h3 class="project-title">${project.title}</h3>
                <p class="project-description">${project.description}</p>
                <div class="project-tags">
                    ${project.tags.map(tag => `<span class="project-tag">${tag}</span>`).join('')}
                </div>
            </div>
        `)
        .join('');

    // Agregar event listeners a las cards recientes
    const recentCards = recentContainer.querySelectorAll('.project-card');
    recentCards.forEach(card => {
        card.addEventListener('click', function () {
            const projectId = parseInt(this.getAttribute('data-project-id'));
            openProjectModal(projectId);
        });
    });
}

// Funci√≥n para inicializar la p√°gina de servicios
function initializeServicesPage() {
    const contactLinks = document.querySelectorAll('.contact-link');
    
    contactLinks.forEach(link => {
        link.addEventListener('click', function (e) {
            e.preventDefault();
            const targetPage = this.getAttribute('data-page');
            navigateToPage(targetPage);
            
            // Actualizar estado activo en la navegaci√≥n
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(nav => nav.classList.remove('active'));
            const targetNav = document.querySelector(`[data-page="${targetPage}"]`);
            if (targetNav) {
                targetNav.classList.add('active');
            }
        });
    });
    
    // Inicializar cards de servicios clickeables
    initializeServiceCards();
}

// Funci√≥n para inicializar el selector de idioma
function initializeLanguageSelector() {
    const languageBtns = document.querySelectorAll('.language-btn');
    
    languageBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            const lang = this.getAttribute('data-lang');
            changeLanguage(lang);
        });
    });
}

// Inicializar cards de servicios clickeables
function initializeServiceCards() {
    const serviceCards = document.querySelectorAll('.service-card.clickable');
    console.log('Service cards encontradas:', serviceCards.length);
    
    if (serviceCards.length === 0) {
        console.log('No se encontraron service cards con clase clickable');
        // Intentar con solo service-card
        const allServiceCards = document.querySelectorAll('.service-card');
        console.log('Total de service cards encontradas:', allServiceCards.length);
    }
    
    serviceCards.forEach(card => {
        console.log('Agregando click listener a:', card.getAttribute('data-service'));
        card.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            console.log('Click en service card:', this.getAttribute('data-service'));
            const serviceType = this.getAttribute('data-service');
            navigateToServiceProjects(serviceType);
        });
    });
}

// Funci√≥n para navegar a proyectos con tags filtrados seg√∫n el servicio
function navigateToServiceProjects(serviceType) {
    // Navegar a la p√°gina de proyectos
    navigateToPage('projects');
    
    // Actualizar estado activo en la navegaci√≥n
    const navItems = document.querySelectorAll('.nav-item');
    navItems.forEach(nav => nav.classList.remove('active'));
    const projectsNav = document.querySelector('[data-page="projects"]');
    if (projectsNav) {
        projectsNav.classList.add('active');
    }
    
    // Mostrar submenu de tags
    toggleTagsSubmenu('projects');
    
    // Filtrar por tags seg√∫n el servicio
    setTimeout(() => {
        filterByService(serviceType);
    }, 100);
}

// Funci√≥n para filtrar proyectos seg√∫n el servicio
function filterByService(serviceType) {
    const tagFilters = document.querySelectorAll('.tag-filter');
    
    // Limpiar filtros activos
    tagFilters.forEach(filter => filter.classList.remove('active'));
    
    // Activar tags seg√∫n el servicio
    switch(serviceType) {
        case 'ciencia-investigacion':
            activateTags(['ciencia', 'investigaci√≥n', 'iot', 'sensores']);
            break;
        case 'arte-digital':
            activateTags(['arte', 'desarrollos', 'sonido', 'luz']);
            break;
        case 'desarrollos':
            activateTags(['desarrollos', 'investigaci√≥n', 'ciencia']);
            break;
        case 'sostenibilidad-educacion':
            activateTags(['sostenibilidad', 'educaci√≥n']);
            break;
    }
}

// Funci√≥n para activar tags espec√≠ficos
function activateTags(tagsToActivate) {
    const tagFilters = document.querySelectorAll('.tag-filter');
    
    tagFilters.forEach(filter => {
        const tag = filter.getAttribute('data-tag');
        if (tagsToActivate.includes(tag)) {
            filter.classList.add('active');
        }
    });
    
    // Simular click en los tags activados para filtrar proyectos
    tagsToActivate.forEach(tagName => {
        const tagFilter = document.querySelector(`[data-tag="${tagName}"]`);
        if (tagFilter) {
            // Simular el evento de click para activar el filtro
            tagFilter.click();
        }
    });
}

// Funci√≥n para inicializar las highlights clickeables del home
function initializeHomeHighlights() {
    const highlightItems = document.querySelectorAll('.highlight-item.clickable');
    console.log('Home highlights encontradas:', highlightItems.length);
    
    highlightItems.forEach(item => {
        item.addEventListener('click', function() {
            const highlightType = this.getAttribute('data-highlight');
            console.log('Click en highlight:', highlightType);
            navigateToHighlightProjects(highlightType);
        });
    });
}

// Funci√≥n para navegar a proyectos seg√∫n el highlight del home
function navigateToHighlightProjects(highlightType) {
    // Navegar a la p√°gina de proyectos
    navigateToPage('projects');
    
    // Actualizar estado activo en la navegaci√≥n
    const navItems = document.querySelectorAll('.nav-item');
    navItems.forEach(nav => nav.classList.remove('active'));
    const projectsNav = document.querySelector('[data-page="projects"]');
    if (projectsNav) {
        projectsNav.classList.add('active');
    }
    
    // Mostrar submenu de tags
    toggleTagsSubmenu('projects');
    
    // Filtrar por tags seg√∫n el highlight
    setTimeout(() => {
        filterByHighlight(highlightType);
    }, 100);
}

// Funci√≥n para filtrar proyectos seg√∫n el highlight del home
function filterByHighlight(highlightType) {
    const tagFilters = document.querySelectorAll('.tag-filter');
    
    // Limpiar filtros activos
    tagFilters.forEach(filter => filter.classList.remove('active'));
    
    // Activar tags seg√∫n el highlight
    switch(highlightType) {
        case 'ciencia-investigacion':
            activateTags(['ciencia', 'investigaci√≥n', 'iot', 'sensores']);
            break;
        case 'arte-interactivo':
            activateTags(['arte', 'interactivo', 'sonido', 'luz']);
            break;
        case 'desarrollos':
            activateTags(['desarrollos', 'investigaci√≥n', 'ciencia']);
            break;
        case 'sostenibilidad':
            activateTags(['sostenibilidad', 'educaci√≥n']);
            break;
    }
}


// Exportar funciones para uso global si es necesario
window.NIXPortfolio = {
    navigateToPage,
    toggleTagFilter,
    openProjectModal,
    closeModal
};
